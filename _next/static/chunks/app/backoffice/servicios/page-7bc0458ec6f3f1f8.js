(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7914],{93102:function(e,r,t){Promise.resolve().then(t.bind(t,85118))},85118:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return h}});var i=t(57437),n=t(2265),s=t(62869),a=t(95186),o=t(73578),c=t(26110),d=t(26815),l=t(2141),u=t(77992),m=t(849),p=t(84190),f=t(56266);function h(){let{toast:e}=(0,u.pm)(),[r,t]=(0,n.useState)([]),[h,x]=(0,n.useState)(!1),[v,g]=(0,n.useState)(!1),[N,j]=(0,n.useState)({nombre:"",descripcion:"",duracion_estimada:0,precio:0}),[b,y]=(0,n.useState)(null),[w,_]=(0,n.useState)(!1);async function C(){let{data:r,error:i}=await l.O.from("servicios").select("*").order("nombre");if(i){e({variant:"destructive",title:"Error",description:"No se pudieron cargar los servicios"});return}t(r)}(0,n.useEffect)(()=>{C()},[]);let E=e=>new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS"}).format(e),R=async i=>{if(i.preventDefault(),!N.nombre.trim()){e({variant:"destructive",title:"Error de validaci\xf3n",description:"El nombre es obligatorio"});return}if(N.duracion_estimada<=0){e({variant:"destructive",title:"Error de validaci\xf3n",description:"La duraci\xf3n debe ser mayor a 0 minutos"});return}if(N.precio<0){e({variant:"destructive",title:"Error de validaci\xf3n",description:"El precio no puede ser negativo"});return}g(!0);try{let{data:i,error:n}=await l.O.from("servicios").insert([{nombre:N.nombre,descripcion:N.descripcion,duracion_estimada:N.duracion_estimada,precio:N.precio}]).select();if(n)throw n;i&&(e({title:"Servicio guardado",description:"El servicio se ha registrado correctamente"}),t([...r,i[0]]),x(!1),j({nombre:"",descripcion:"",duracion_estimada:0,precio:0}))}catch(r){e({variant:"destructive",title:"Error",description:"Hubo un problema al guardar el servicio"})}finally{g(!1)}},S=async i=>{if(i.preventDefault(),!b.nombre.trim()){e({variant:"destructive",title:"Error de validaci\xf3n",description:"El nombre es obligatorio"});return}if(b.duracion_estimada<=0){e({variant:"destructive",title:"Error de validaci\xf3n",description:"La duraci\xf3n debe ser mayor a 0 minutos"});return}if(b.precio<0){e({variant:"destructive",title:"Error de validaci\xf3n",description:"El precio no puede ser negativo"});return}if(window.confirm("\xbfEst\xe1 seguro de guardar los cambios?")){g(!0);try{let{data:i,error:n}=await l.O.from("servicios").update({nombre:b.nombre,descripcion:b.descripcion,duracion_estimada:b.duracion_estimada,precio:b.precio}).eq("id",b.id).select();if(n)throw n;i&&(e({title:"Servicio actualizado",description:"Los cambios se han guardado correctamente"}),t(r.map(e=>e.id===b.id?i[0]:e)),_(!1),y(null))}catch(r){e({variant:"destructive",title:"Error",description:"Hubo un problema al actualizar el servicio"})}finally{g(!1)}}};return(0,i.jsxs)("div",{className:"container mx-auto py-10",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Servicios"}),(0,i.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,i.jsx)(a.I,{placeholder:"Buscar servicios...",className:"max-w-sm"}),(0,i.jsx)(s.z,{onClick:()=>x(!0),children:"A\xf1adir Nuevo Servicio"})]}),(0,i.jsxs)(o.iA,{children:[(0,i.jsx)(o.xD,{children:(0,i.jsxs)(o.SC,{children:[(0,i.jsx)(o.ss,{children:"Nombre"}),(0,i.jsx)(o.ss,{children:"Descripci\xf3n"}),(0,i.jsx)(o.ss,{children:"Duraci\xf3n (min)"}),(0,i.jsx)(o.ss,{children:"Precio"}),(0,i.jsx)(o.ss,{className:"text-right",children:"Acciones"})]})}),(0,i.jsx)(o.RM,{children:r.map(e=>(0,i.jsxs)(o.SC,{children:[(0,i.jsx)(o.pj,{className:"font-medium",children:e.nombre}),(0,i.jsx)(o.pj,{children:e.descripcion}),(0,i.jsxs)(o.pj,{children:[e.duracion_estimada," min"]}),(0,i.jsx)(o.pj,{children:E(e.precio)}),(0,i.jsx)(o.pj,{className:"text-right",children:(0,i.jsxs)(p.h_,{children:[(0,i.jsx)(p.$F,{asChild:!0,children:(0,i.jsxs)(s.z,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,i.jsx)("span",{className:"sr-only",children:"Abrir men\xfa"}),(0,i.jsx)(f.Z,{className:"h-4 w-4"})]})}),(0,i.jsxs)(p.AW,{align:"end",children:[(0,i.jsx)(p.Ju,{children:"Acciones"}),(0,i.jsx)(p.Xi,{onClick:()=>{y(e),_(!0)},children:"Editar servicio"})]})]})})]},e.id))})]}),(0,i.jsx)(c.Vq,{open:h,onOpenChange:x,children:(0,i.jsxs)(c.cZ,{children:[(0,i.jsxs)(c.fK,{children:[(0,i.jsx)(c.$N,{children:"A\xf1adir Nuevo Servicio"}),(0,i.jsx)(c.Be,{children:"Complete los datos del nuevo servicio. Los campos marcados con * son obligatorios."})]}),(0,i.jsxs)("form",{onSubmit:R,children:[(0,i.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,i.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,i.jsx)(d._,{htmlFor:"nombre",className:"text-right",children:"Nombre *"}),(0,i.jsx)(a.I,{id:"nombre",className:"col-span-3",value:N.nombre,onChange:e=>j({...N,nombre:e.target.value}),required:!0})]}),(0,i.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,i.jsx)(d._,{htmlFor:"descripcion",className:"text-right",children:"Descripci\xf3n"}),(0,i.jsx)(a.I,{id:"descripcion",className:"col-span-3",value:N.descripcion,onChange:e=>j({...N,descripcion:e.target.value})})]}),(0,i.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,i.jsx)(d._,{htmlFor:"duracion",className:"text-right",children:"Duraci\xf3n (min) *"}),(0,i.jsx)(a.I,{id:"duracion",type:"number",min:"1",className:"col-span-3",value:N.duracion_estimada,onChange:e=>j({...N,duracion_estimada:Number(e.target.value)}),required:!0})]}),(0,i.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,i.jsx)(d._,{htmlFor:"precio",className:"text-right",children:"Precio *"}),(0,i.jsx)(a.I,{id:"precio",type:"number",min:"0",step:"0.01",className:"col-span-3",value:N.precio,onChange:e=>j({...N,precio:Number(e.target.value)}),required:!0})]})]}),(0,i.jsx)(c.cN,{children:(0,i.jsx)(s.z,{type:"submit",disabled:v,children:v?"Guardando...":"Guardar Servicio"})})]})]})}),(0,i.jsx)(c.Vq,{open:w,onOpenChange:_,children:(0,i.jsxs)(c.cZ,{children:[(0,i.jsxs)(c.fK,{children:[(0,i.jsx)(c.$N,{children:"Editar Servicio"}),(0,i.jsx)(c.Be,{children:"Modifique los datos del servicio."})]}),(0,i.jsxs)("form",{onSubmit:S,children:[(0,i.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,i.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,i.jsx)(d._,{htmlFor:"edit-nombre",className:"text-right",children:"Nombre *"}),(0,i.jsx)(a.I,{id:"edit-nombre",className:"col-span-3",value:null==b?void 0:b.nombre,onChange:e=>y(r=>r?{...r,nombre:e.target.value}:r),required:!0})]}),(0,i.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,i.jsx)(d._,{htmlFor:"edit-descripcion",className:"text-right",children:"Descripci\xf3n"}),(0,i.jsx)(a.I,{id:"edit-descripcion",className:"col-span-3",value:null==b?void 0:b.descripcion,onChange:e=>y(r=>r?{...r,descripcion:e.target.value}:r)})]}),(0,i.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,i.jsx)(d._,{htmlFor:"edit-duracion",className:"text-right",children:"Duraci\xf3n (min) *"}),(0,i.jsx)(a.I,{id:"edit-duracion",type:"number",min:"1",className:"col-span-3",value:null==b?void 0:b.duracion_estimada,onChange:e=>y(r=>r?{...r,duracion_estimada:Number(e.target.value)}:r),required:!0})]}),(0,i.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,i.jsx)(d._,{htmlFor:"edit-precio",className:"text-right",children:"Precio *"}),(0,i.jsx)(a.I,{id:"edit-precio",type:"number",min:"0",step:"0.01",className:"col-span-3",value:null==b?void 0:b.precio,onChange:e=>y(r=>r?{...r,precio:Number(e.target.value)}:r),required:!0})]})]}),(0,i.jsx)(c.cN,{children:(0,i.jsx)(s.z,{type:"submit",disabled:v,children:v?"Guardando...":"Guardar Cambios"})})]})]})}),(0,i.jsx)(m.x,{})]})}},84190:function(e,r,t){"use strict";t.d(r,{$F:function(){return u},AW:function(){return m},Ju:function(){return f},VD:function(){return h},Xi:function(){return p},h_:function(){return l}});var i=t(57437),n=t(2265),s=t(70085),a=t(10407),o=t(30401),c=t(40519),d=t(94508);let l=s.fC,u=s.xz;s.ZA,s.Uv,s.Tr,s.Ee,n.forwardRef((e,r)=>{let{className:t,inset:n,children:o,...c}=e;return(0,i.jsxs)(s.fF,{ref:r,className:(0,d.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",t),...c,children:[o,(0,i.jsx)(a.Z,{className:"ml-auto"})]})}).displayName=s.fF.displayName,n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,i.jsx)(s.tu,{ref:r,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}).displayName=s.tu.displayName;let m=n.forwardRef((e,r)=>{let{className:t,sideOffset:n=4,...a}=e;return(0,i.jsx)(s.Uv,{children:(0,i.jsx)(s.VY,{ref:r,sideOffset:n,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...a})})});m.displayName=s.VY.displayName;let p=n.forwardRef((e,r)=>{let{className:t,inset:n,...a}=e;return(0,i.jsx)(s.ck,{ref:r,className:(0,d.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",n&&"pl-8",t),...a})});p.displayName=s.ck.displayName,n.forwardRef((e,r)=>{let{className:t,children:n,checked:a,...c}=e;return(0,i.jsxs)(s.oC,{ref:r,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:a,...c,children:[(0,i.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,i.jsx)(s.wU,{children:(0,i.jsx)(o.Z,{className:"h-4 w-4"})})}),n]})}).displayName=s.oC.displayName,n.forwardRef((e,r)=>{let{className:t,children:n,...a}=e;return(0,i.jsxs)(s.Rk,{ref:r,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...a,children:[(0,i.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,i.jsx)(s.wU,{children:(0,i.jsx)(c.Z,{className:"h-2 w-2 fill-current"})})}),n]})}).displayName=s.Rk.displayName;let f=n.forwardRef((e,r)=>{let{className:t,inset:n,...a}=e;return(0,i.jsx)(s.__,{ref:r,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",t),...a})});f.displayName=s.__.displayName;let h=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,i.jsx)(s.Z0,{ref:r,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",t),...n})});h.displayName=s.Z0.displayName},30401:function(e,r,t){"use strict";t.d(r,{Z:function(){return i}});let i=(0,t(39763).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},10407:function(e,r,t){"use strict";t.d(r,{Z:function(){return i}});let i=(0,t(39763).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},56266:function(e,r,t){"use strict";t.d(r,{Z:function(){return i}});let i=(0,t(39763).Z)("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},67822:function(e,r,t){"use strict";t.d(r,{B:function(){return c}});var i=t(2265),n=t(73966),s=t(98575),a=t(37053),o=t(57437);function c(e){let r=e+"CollectionProvider",[t,c]=(0,n.b)(r),[d,l]=t(r,{collectionRef:{current:null},itemMap:new Map}),u=e=>{let{scope:r,children:t}=e,n=i.useRef(null),s=i.useRef(new Map).current;return(0,o.jsx)(d,{scope:r,itemMap:s,collectionRef:n,children:t})};u.displayName=r;let m=e+"CollectionSlot",p=i.forwardRef((e,r)=>{let{scope:t,children:i}=e,n=l(m,t),c=(0,s.e)(r,n.collectionRef);return(0,o.jsx)(a.g7,{ref:c,children:i})});p.displayName=m;let f=e+"CollectionItemSlot",h="data-radix-collection-item",x=i.forwardRef((e,r)=>{let{scope:t,children:n,...c}=e,d=i.useRef(null),u=(0,s.e)(r,d),m=l(f,t);return i.useEffect(()=>(m.itemMap.set(d,{ref:d,...c}),()=>void m.itemMap.delete(d))),(0,o.jsx)(a.g7,{[h]:"",ref:u,children:n})});return x.displayName=f,[{Provider:u,Slot:p,ItemSlot:x},function(r){let t=l(e+"CollectionConsumer",r);return i.useCallback(()=>{let e=t.collectionRef.current;if(!e)return[];let r=Array.from(e.querySelectorAll("[".concat(h,"]")));return Array.from(t.itemMap.values()).sort((e,t)=>r.indexOf(e.ref.current)-r.indexOf(t.ref.current))},[t.collectionRef,t.itemMap])},c]}},29114:function(e,r,t){"use strict";t.d(r,{gm:function(){return s}});var i=t(2265);t(57437);var n=i.createContext(void 0);function s(e){let r=i.useContext(n);return e||r||"ltr"}},71599:function(e,r,t){"use strict";t.d(r,{z:function(){return a}});var i=t(2265),n=t(98575),s=t(61188),a=e=>{var r,t;let a,c;let{present:d,children:l}=e,u=function(e){var r,t;let[n,a]=i.useState(),c=i.useRef({}),d=i.useRef(e),l=i.useRef("none"),[u,m]=(r=e?"mounted":"unmounted",t={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},i.useReducer((e,r)=>{let i=t[e][r];return null!=i?i:e},r));return i.useEffect(()=>{let e=o(c.current);l.current="mounted"===u?e:"none"},[u]),(0,s.b)(()=>{let r=c.current,t=d.current;if(t!==e){let i=l.current,n=o(r);e?m("MOUNT"):"none"===n||(null==r?void 0:r.display)==="none"?m("UNMOUNT"):t&&i!==n?m("ANIMATION_OUT"):m("UNMOUNT"),d.current=e}},[e,m]),(0,s.b)(()=>{if(n){var e;let r;let t=null!==(e=n.ownerDocument.defaultView)&&void 0!==e?e:window,i=e=>{let i=o(c.current).includes(e.animationName);if(e.target===n&&i&&(m("ANIMATION_END"),!d.current)){let e=n.style.animationFillMode;n.style.animationFillMode="forwards",r=t.setTimeout(()=>{"forwards"===n.style.animationFillMode&&(n.style.animationFillMode=e)})}},s=e=>{e.target===n&&(l.current=o(c.current))};return n.addEventListener("animationstart",s),n.addEventListener("animationcancel",i),n.addEventListener("animationend",i),()=>{t.clearTimeout(r),n.removeEventListener("animationstart",s),n.removeEventListener("animationcancel",i),n.removeEventListener("animationend",i)}}m("ANIMATION_END")},[n,m]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:i.useCallback(e=>{e&&(c.current=getComputedStyle(e)),a(e)},[])}}(d),m="function"==typeof l?l({present:u.isPresent}):i.Children.only(l),p=(0,n.e)(u.ref,(a=null===(r=Object.getOwnPropertyDescriptor(m.props,"ref"))||void 0===r?void 0:r.get)&&"isReactWarning"in a&&a.isReactWarning?m.ref:(a=null===(t=Object.getOwnPropertyDescriptor(m,"ref"))||void 0===t?void 0:t.get)&&"isReactWarning"in a&&a.isReactWarning?m.props.ref:m.props.ref||m.ref);return"function"==typeof l||u.isPresent?i.cloneElement(m,{ref:p}):null};function o(e){return(null==e?void 0:e.animationName)||"none"}a.displayName="Presence"},95098:function(e,r,t){"use strict";t.d(r,{T:function(){return a},f:function(){return o}});var i=t(2265),n=t(66840),s=t(57437),a=i.forwardRef((e,r)=>(0,s.jsx)(n.WV.span,{...e,ref:r,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));a.displayName="VisuallyHidden";var o=a}},function(e){e.O(0,[6137,3777,8841,6008,1799,1218,479,4139,2971,2117,1744],function(){return e(e.s=93102)}),_N_E=e.O()}]);