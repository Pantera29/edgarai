(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7914],{93102:function(e,r,i){Promise.resolve().then(i.bind(i,85118))},85118:function(e,r,i){"use strict";i.r(r),i.d(r,{default:function(){return g}});var t=i(57437),n=i(2265),s=i(62869),o=i(95186),a=i(73578),c=i(26110),l=i(26815),d=i(2141),u=i(77992),p=i(849),m=i(84190),f=i(56266),h=i(99376),v=i(66438);function g(){let[e,r]=(0,n.useState)(null),[i,g]=(0,n.useState)(""),[x,j]=(0,n.useState)({}),b=(0,h.useRouter)();(0,n.useEffect)(()=>{r(new URLSearchParams(window.location.search))},[]),(0,n.useEffect)(()=>{if(e){let r=e.get("token");if(r){g(r);let e=(0,v.W)(r);null===e&&b.push("/login"),j(e||{})}}},[e,b]);let{toast:N}=(0,u.pm)(),[y,w]=(0,n.useState)([]),[D,_]=(0,n.useState)(!1),[C,E]=(0,n.useState)(!1),[R,I]=(0,n.useState)({nombre:"",descripcion:"",duracion_estimada:0,precio:0}),[S,k]=(0,n.useState)(null),[F,M]=(0,n.useState)(!1);async function O(){let{data:e,error:r}=await d.O.from("servicios").select("*").order("nombre");if(r){N({variant:"destructive",title:"Error",description:"No se pudieron cargar los servicios"});return}w(e)}(0,n.useEffect)(()=>{O()},[]);let A=e=>new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS"}).format(e),P=async e=>{if(e.preventDefault(),!R.nombre.trim()){N({variant:"destructive",title:"Error de validaci\xf3n",description:"El nombre es obligatorio"});return}if(R.duracion_estimada<=0){N({variant:"destructive",title:"Error de validaci\xf3n",description:"La duraci\xf3n debe ser mayor a 0 minutos"});return}if(R.precio<0){N({variant:"destructive",title:"Error de validaci\xf3n",description:"El precio no puede ser negativo"});return}E(!0);try{let{data:e,error:r}=await d.O.from("servicios").insert([{nombre:R.nombre,descripcion:R.descripcion,duracion_estimada:R.duracion_estimada,precio:R.precio}]).select();if(r)throw r;e&&(N({title:"Servicio guardado",description:"El servicio se ha registrado correctamente"}),w([...y,e[0]]),_(!1),I({nombre:"",descripcion:"",duracion_estimada:0,precio:0}))}catch(e){N({variant:"destructive",title:"Error",description:"Hubo un problema al guardar el servicio"})}finally{E(!1)}},W=async e=>{if(e.preventDefault(),!S.nombre.trim()){N({variant:"destructive",title:"Error de validaci\xf3n",description:"El nombre es obligatorio"});return}if(S.duracion_estimada<=0){N({variant:"destructive",title:"Error de validaci\xf3n",description:"La duraci\xf3n debe ser mayor a 0 minutos"});return}if(S.precio<0){N({variant:"destructive",title:"Error de validaci\xf3n",description:"El precio no puede ser negativo"});return}if(window.confirm("\xbfEst\xe1 seguro de guardar los cambios?")){E(!0);try{let{data:e,error:r}=await d.O.from("servicios").update({nombre:S.nombre,descripcion:S.descripcion,duracion_estimada:S.duracion_estimada,precio:S.precio}).eq("id",S.id).select();if(r)throw r;e&&(N({title:"Servicio actualizado",description:"Los cambios se han guardado correctamente"}),w(y.map(r=>r.id===S.id?e[0]:r)),M(!1),k(null))}catch(e){N({variant:"destructive",title:"Error",description:"Hubo un problema al actualizar el servicio"})}finally{E(!1)}}};return(0,t.jsxs)("div",{className:"container mx-auto py-10",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Servicios"}),(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)(o.I,{placeholder:"Buscar servicios...",className:"max-w-sm"}),(0,t.jsx)(s.z,{onClick:()=>_(!0),children:"A\xf1adir Nuevo Servicio"})]}),(0,t.jsxs)(a.iA,{children:[(0,t.jsx)(a.xD,{children:(0,t.jsxs)(a.SC,{children:[(0,t.jsx)(a.ss,{children:"Nombre"}),(0,t.jsx)(a.ss,{children:"Descripci\xf3n"}),(0,t.jsx)(a.ss,{children:"Duraci\xf3n (min)"}),(0,t.jsx)(a.ss,{children:"Precio"}),(0,t.jsx)(a.ss,{className:"text-right",children:"Acciones"})]})}),(0,t.jsx)(a.RM,{children:y.map(e=>(0,t.jsxs)(a.SC,{children:[(0,t.jsx)(a.pj,{className:"font-medium",children:e.nombre}),(0,t.jsx)(a.pj,{children:e.descripcion}),(0,t.jsxs)(a.pj,{children:[e.duracion_estimada," min"]}),(0,t.jsx)(a.pj,{children:A(e.precio)}),(0,t.jsx)(a.pj,{className:"text-right",children:(0,t.jsxs)(m.h_,{children:[(0,t.jsx)(m.$F,{asChild:!0,children:(0,t.jsxs)(s.z,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,t.jsx)("span",{className:"sr-only",children:"Abrir men\xfa"}),(0,t.jsx)(f.Z,{className:"h-4 w-4"})]})}),(0,t.jsxs)(m.AW,{align:"end",children:[(0,t.jsx)(m.Ju,{children:"Acciones"}),(0,t.jsx)(m.Xi,{onClick:()=>{k(e),M(!0)},children:"Editar servicio"})]})]})})]},e.id))})]}),(0,t.jsx)(c.Vq,{open:D,onOpenChange:_,children:(0,t.jsxs)(c.cZ,{children:[(0,t.jsxs)(c.fK,{children:[(0,t.jsx)(c.$N,{children:"A\xf1adir Nuevo Servicio"}),(0,t.jsx)(c.Be,{children:"Complete los datos del nuevo servicio. Los campos marcados con * son obligatorios."})]}),(0,t.jsxs)("form",{onSubmit:P,children:[(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(l._,{htmlFor:"nombre",className:"text-right",children:"Nombre *"}),(0,t.jsx)(o.I,{id:"nombre",className:"col-span-3",value:R.nombre,onChange:e=>I({...R,nombre:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(l._,{htmlFor:"descripcion",className:"text-right",children:"Descripci\xf3n"}),(0,t.jsx)(o.I,{id:"descripcion",className:"col-span-3",value:R.descripcion,onChange:e=>I({...R,descripcion:e.target.value})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(l._,{htmlFor:"duracion",className:"text-right",children:"Duraci\xf3n (min) *"}),(0,t.jsx)(o.I,{id:"duracion",type:"number",min:"1",className:"col-span-3",value:R.duracion_estimada,onChange:e=>I({...R,duracion_estimada:Number(e.target.value)}),required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(l._,{htmlFor:"precio",className:"text-right",children:"Precio *"}),(0,t.jsx)(o.I,{id:"precio",type:"number",min:"0",step:"0.01",className:"col-span-3",value:R.precio,onChange:e=>I({...R,precio:Number(e.target.value)}),required:!0})]})]}),(0,t.jsx)(c.cN,{children:(0,t.jsx)(s.z,{type:"submit",disabled:C,children:C?"Guardando...":"Guardar Servicio"})})]})]})}),(0,t.jsx)(c.Vq,{open:F,onOpenChange:M,children:(0,t.jsxs)(c.cZ,{children:[(0,t.jsxs)(c.fK,{children:[(0,t.jsx)(c.$N,{children:"Editar Servicio"}),(0,t.jsx)(c.Be,{children:"Modifique los datos del servicio."})]}),(0,t.jsxs)("form",{onSubmit:W,children:[(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(l._,{htmlFor:"edit-nombre",className:"text-right",children:"Nombre *"}),(0,t.jsx)(o.I,{id:"edit-nombre",className:"col-span-3",value:null==S?void 0:S.nombre,onChange:e=>k(r=>r?{...r,nombre:e.target.value}:r),required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(l._,{htmlFor:"edit-descripcion",className:"text-right",children:"Descripci\xf3n"}),(0,t.jsx)(o.I,{id:"edit-descripcion",className:"col-span-3",value:null==S?void 0:S.descripcion,onChange:e=>k(r=>r?{...r,descripcion:e.target.value}:r)})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(l._,{htmlFor:"edit-duracion",className:"text-right",children:"Duraci\xf3n (min) *"}),(0,t.jsx)(o.I,{id:"edit-duracion",type:"number",min:"1",className:"col-span-3",value:null==S?void 0:S.duracion_estimada,onChange:e=>k(r=>r?{...r,duracion_estimada:Number(e.target.value)}:r),required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(l._,{htmlFor:"edit-precio",className:"text-right",children:"Precio *"}),(0,t.jsx)(o.I,{id:"edit-precio",type:"number",min:"0",step:"0.01",className:"col-span-3",value:null==S?void 0:S.precio,onChange:e=>k(r=>r?{...r,precio:Number(e.target.value)}:r),required:!0})]})]}),(0,t.jsx)(c.cN,{children:(0,t.jsx)(s.z,{type:"submit",disabled:C,children:C?"Guardando...":"Guardar Cambios"})})]})]})}),(0,t.jsx)(p.x,{})]})}},30401:function(e,r,i){"use strict";i.d(r,{Z:function(){return t}});let t=(0,i(39763).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},10407:function(e,r,i){"use strict";i.d(r,{Z:function(){return t}});let t=(0,i(39763).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},56266:function(e,r,i){"use strict";i.d(r,{Z:function(){return t}});let t=(0,i(39763).Z)("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},32489:function(e,r,i){"use strict";i.d(r,{Z:function(){return t}});let t=(0,i(39763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},49027:function(e,r,i){"use strict";i.d(r,{Dx:function(){return ei},VY:function(){return er},aV:function(){return ee},dk:function(){return et},fC:function(){return J},h_:function(){return Q},jm:function(){return K},p8:function(){return N},x8:function(){return en},xz:function(){return Y}});var t=i(2265),n=i(6741),s=i(98575),o=i(73966),a=i(99255),c=i(80886),l=i(15278),d=i(99103),u=i(83832),p=i(71599),m=i(66840),f=i(86097),h=i(99157),v=i(5478),g=i(37053),x=i(57437),j="Dialog",[b,N]=(0,o.b)(j),[y,w]=b(j),D=e=>{let{__scopeDialog:r,children:i,open:n,defaultOpen:s,onOpenChange:o,modal:l=!0}=e,d=t.useRef(null),u=t.useRef(null),[p=!1,m]=(0,c.T)({prop:n,defaultProp:s,onChange:o});return(0,x.jsx)(y,{scope:r,triggerRef:d,contentRef:u,contentId:(0,a.M)(),titleId:(0,a.M)(),descriptionId:(0,a.M)(),open:p,onOpenChange:m,onOpenToggle:t.useCallback(()=>m(e=>!e),[m]),modal:l,children:i})};D.displayName=j;var _="DialogTrigger",C=t.forwardRef((e,r)=>{let{__scopeDialog:i,...t}=e,o=w(_,i),a=(0,s.e)(r,o.triggerRef);return(0,x.jsx)(m.WV.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":H(o.open),...t,ref:a,onClick:(0,n.M)(e.onClick,o.onOpenToggle)})});C.displayName=_;var E="DialogPortal",[R,I]=b(E,{forceMount:void 0}),S=e=>{let{__scopeDialog:r,forceMount:i,children:n,container:s}=e,o=w(E,r);return(0,x.jsx)(R,{scope:r,forceMount:i,children:t.Children.map(n,e=>(0,x.jsx)(p.z,{present:i||o.open,children:(0,x.jsx)(u.h,{asChild:!0,container:s,children:e})}))})};S.displayName=E;var k="DialogOverlay",F=t.forwardRef((e,r)=>{let i=I(k,e.__scopeDialog),{forceMount:t=i.forceMount,...n}=e,s=w(k,e.__scopeDialog);return s.modal?(0,x.jsx)(p.z,{present:t||s.open,children:(0,x.jsx)(M,{...n,ref:r})}):null});F.displayName=k;var M=t.forwardRef((e,r)=>{let{__scopeDialog:i,...t}=e,n=w(k,i);return(0,x.jsx)(h.Z,{as:g.g7,allowPinchZoom:!0,shards:[n.contentRef],children:(0,x.jsx)(m.WV.div,{"data-state":H(n.open),...t,ref:r,style:{pointerEvents:"auto",...t.style}})})}),O="DialogContent",A=t.forwardRef((e,r)=>{let i=I(O,e.__scopeDialog),{forceMount:t=i.forceMount,...n}=e,s=w(O,e.__scopeDialog);return(0,x.jsx)(p.z,{present:t||s.open,children:s.modal?(0,x.jsx)(P,{...n,ref:r}):(0,x.jsx)(W,{...n,ref:r})})});A.displayName=O;var P=t.forwardRef((e,r)=>{let i=w(O,e.__scopeDialog),o=t.useRef(null),a=(0,s.e)(r,i.contentRef,o);return t.useEffect(()=>{let e=o.current;if(e)return(0,v.Ry)(e)},[]),(0,x.jsx)(V,{...e,ref:a,trapFocus:i.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,n.M)(e.onCloseAutoFocus,e=>{var r;e.preventDefault(),null===(r=i.triggerRef.current)||void 0===r||r.focus()}),onPointerDownOutside:(0,n.M)(e.onPointerDownOutside,e=>{let r=e.detail.originalEvent,i=0===r.button&&!0===r.ctrlKey;(2===r.button||i)&&e.preventDefault()}),onFocusOutside:(0,n.M)(e.onFocusOutside,e=>e.preventDefault())})}),W=t.forwardRef((e,r)=>{let i=w(O,e.__scopeDialog),n=t.useRef(!1),s=t.useRef(!1);return(0,x.jsx)(V,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:r=>{var t,o;null===(t=e.onCloseAutoFocus)||void 0===t||t.call(e,r),r.defaultPrevented||(n.current||null===(o=i.triggerRef.current)||void 0===o||o.focus(),r.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:r=>{var t,o;null===(t=e.onInteractOutside)||void 0===t||t.call(e,r),r.defaultPrevented||(n.current=!0,"pointerdown"!==r.detail.originalEvent.type||(s.current=!0));let a=r.target;(null===(o=i.triggerRef.current)||void 0===o?void 0:o.contains(a))&&r.preventDefault(),"focusin"===r.detail.originalEvent.type&&s.current&&r.preventDefault()}})}),V=t.forwardRef((e,r)=>{let{__scopeDialog:i,trapFocus:n,onOpenAutoFocus:o,onCloseAutoFocus:a,...c}=e,u=w(O,i),p=t.useRef(null),m=(0,s.e)(r,p);return(0,f.EW)(),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(d.M,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:o,onUnmountAutoFocus:a,children:(0,x.jsx)(l.XB,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":H(u.open),...c,ref:m,onDismiss:()=>u.onOpenChange(!1)})}),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)($,{titleId:u.titleId}),(0,x.jsx)(U,{contentRef:p,descriptionId:u.descriptionId})]})]})}),Z="DialogTitle",q=t.forwardRef((e,r)=>{let{__scopeDialog:i,...t}=e,n=w(Z,i);return(0,x.jsx)(m.WV.h2,{id:n.titleId,...t,ref:r})});q.displayName=Z;var z="DialogDescription",T=t.forwardRef((e,r)=>{let{__scopeDialog:i,...t}=e,n=w(z,i);return(0,x.jsx)(m.WV.p,{id:n.descriptionId,...t,ref:r})});T.displayName=z;var B="DialogClose",L=t.forwardRef((e,r)=>{let{__scopeDialog:i,...t}=e,s=w(B,i);return(0,x.jsx)(m.WV.button,{type:"button",...t,ref:r,onClick:(0,n.M)(e.onClick,()=>s.onOpenChange(!1))})});function H(e){return e?"open":"closed"}L.displayName=B;var G="DialogTitleWarning",[K,X]=(0,o.k)(G,{contentName:O,titleName:Z,docsSlug:"dialog"}),$=e=>{let{titleId:r}=e,i=X(G),n="`".concat(i.contentName,"` requires a `").concat(i.titleName,"` for the component to be accessible for screen reader users.\n\nIf you want to hide the `").concat(i.titleName,"`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/").concat(i.docsSlug);return t.useEffect(()=>{r&&!document.getElementById(r)&&console.error(n)},[n,r]),null},U=e=>{let{contentRef:r,descriptionId:i}=e,n=X("DialogDescriptionWarning"),s="Warning: Missing `Description` or `aria-describedby={undefined}` for {".concat(n.contentName,"}.");return t.useEffect(()=>{var e;let t=null===(e=r.current)||void 0===e?void 0:e.getAttribute("aria-describedby");i&&t&&!document.getElementById(i)&&console.warn(s)},[s,r,i]),null},J=D,Y=C,Q=S,ee=F,er=A,ei=q,et=T,en=L},6394:function(e,r,i){"use strict";i.d(r,{f:function(){return a}});var t=i(2265),n=i(66840),s=i(57437),o=t.forwardRef((e,r)=>(0,s.jsx)(n.WV.label,{...e,ref:r,onMouseDown:r=>{var i;r.target.closest("button, input, select, textarea")||(null===(i=e.onMouseDown)||void 0===i||i.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));o.displayName="Label";var a=o},95098:function(e,r,i){"use strict";i.d(r,{T:function(){return o},f:function(){return a}});var t=i(2265),n=i(66840),s=i(57437),o=t.forwardRef((e,r)=>(0,s.jsx)(n.WV.span,{...e,ref:r,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));o.displayName="VisuallyHidden";var a=o}},function(e){e.O(0,[8218,6137,3777,8841,3314,6008,5055,3513,1218,1915,365,2971,2117,1744],function(){return e(e.s=93102)}),_N_E=e.O()}]);