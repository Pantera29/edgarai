(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9616],{40659:function(e,a,s){Promise.resolve().then(s.bind(s,95683))},95683:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return K}});var t=s(57437),i=s(2265),r=s(62869),l=s(95186),n=s(73578),d=s(26110),c=s(26815),o=s(2141),u=s(77992),m=s(849),h=s(53647),x=s(45727),p=s(70236),f=s(53178),v=s(71344),g=s(35613),j=s(24298),_=s(89048);s(87676);var y=s(84190),b=s(31047),N=s(91723),w=s(22252),C=s(66901),S=s(45131),k=s(95452),Z=s(27648),E=s(1098),z=s(71878),D=s(6639),M=s(94508),P=s(81103),R=s(43643);i.forwardRef((e,a)=>{let{className:s,children:i,...r}=e;return(0,t.jsxs)(R.fC,{ref:a,className:(0,M.cn)("relative overflow-hidden",s),...r,children:[(0,t.jsx)(R.l_,{className:"h-full w-full rounded-[inherit]",children:i}),(0,t.jsx)(F,{}),(0,t.jsx)(R.Ns,{})]})}).displayName=R.fC.displayName;let F=i.forwardRef((e,a)=>{let{className:s,orientation:i="vertical",...r}=e;return(0,t.jsx)(R.gb,{ref:a,orientation:i,className:(0,M.cn)("flex touch-none select-none transition-colors","vertical"===i&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===i&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...r,children:(0,t.jsx)(R.q4,{className:"relative flex-1 rounded-full bg-border"})})});F.displayName=R.gb.displayName;let H=e=>{let{date:a,dayInfo:s,onClick:i,disabled:r,isSelected:l}=e,n="w-8 h-8 p-0 font-normal relative text-sm flex items-center justify-center rounded-md";return r?(0,t.jsx)("button",{disabled:!0,className:(0,M.cn)(n,"text-muted-foreground opacity-50"),children:(0,t.jsx)("time",{dateTime:(0,p.Z)(a,"yyyy-MM-dd"),children:(0,p.Z)(a,"d")})}):(0,t.jsx)("button",{onClick:i,className:(0,M.cn)(n,"transition-colors",l&&"ring-2 ring-primary ring-offset-2 bg-primary text-primary-foreground",!l&&"hover:bg-accent hover:text-accent-foreground",s.isFullyBlocked?"bg-[#F3F4F6] text-gray-500":"high"===s.status?"bg-[#E6F4EA] text-green-700":"medium"===s.status?"bg-[#FEF3C7] text-yellow-700":"bg-[#FEE2E2] text-red-700"),children:(0,t.jsx)("time",{dateTime:(0,p.Z)(a,"yyyy-MM-dd"),children:(0,p.Z)(a,"d")})})},A=()=>(0,t.jsxs)("div",{className:"flex justify-center gap-6 text-xs mt-4 px-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2.5 h-2.5 rounded bg-[#E6F4EA]"}),(0,t.jsx)("span",{children:"Disponible"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2.5 h-2.5 rounded bg-yellow-50"}),(0,t.jsx)("span",{children:"Moderado"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2.5 h-2.5 rounded bg-[#FEE2E2]"}),(0,t.jsx)("span",{children:"Limitado"})]})]});function T(e){let{selectedDate:a,onSelect:s,blockedDates:l,operatingHours:n,turnDuration:d,appointments:c,onTimeSlotSelect:o,selectedService:u,className:m}=e,[h,x]=(0,i.useState)([]),[v,g]=(0,i.useState)(!1),[y,N]=(0,i.useState)(new Date),[w,C]=(0,i.useState)(null),S=(0,i.useRef)(null),k=e=>{let a=0===e.getDay()?1:e.getDay()+1,s=n.find(e=>e.dia_semana===a),t=(0,p.Z)(e,"yyyy-MM-dd"),i=l.find(e=>e.fecha===t);if(!s||!s.es_dia_laboral)return{percentage:0,status:"blocked",totalSlots:0,availableSlots:0,isFullyBlocked:!0,isPartiallyBlocked:!1,blockReason:"D\xeda no laborable"};if(null==i?void 0:i.dia_completo)return{percentage:0,status:"blocked",totalSlots:0,availableSlots:0,isFullyBlocked:!0,isPartiallyBlocked:!1,blockReason:i.motivo};let r=!!i&&!i.dia_completo,o=(0,f.Z)(s.hora_apertura,"HH:mm:ss",e),u=Math.floor(((0,f.Z)(s.hora_cierre,"HH:mm:ss",e).getTime()-o.getTime())/6e4/d)*s.servicios_simultaneos_max,m=c.filter(e=>(0,p.Z)(new Date(e.fecha_hora),"yyyy-MM-dd")===t).reduce((e,a)=>e+Math.ceil(a.servicios.duracion_estimada/d),0),h=(u-m)/u*100,x=100-h;return{percentage:h,status:x>80?"low":x>50?"medium":"high",totalSlots:u,availableSlots:u-m,nextAvailable:void 0,peakHours:void 0,isFullyBlocked:!1,isPartiallyBlocked:r,blockReason:null==i?void 0:i.motivo}},Z=e=>{let a=0===e.getDay()?1:e.getDay()+1,s=n.find(e=>e.dia_semana===a);if(!s||!s.es_dia_laboral)return[];let t=[],i=(0,f.Z)(s.hora_apertura,"HH:mm:ss",e),r=(0,f.Z)(s.hora_cierre,"HH:mm:ss",e),l=(0,p.Z)(e,"yyyy-MM-dd"),o=c.filter(e=>(0,p.Z)(new Date(e.fecha_hora),"yyyy-MM-dd")===l),u=i;for(;u<r;){let a=(0,p.Z)(u,"HH:mm"),i=R(e,a),r=o.filter(e=>{let s=(0,p.Z)(new Date(e.fecha_hora),"HH:mm"),t=(0,p.Z)((0,j.Z)(new Date(e.fecha_hora),e.servicios.duracion_estimada),"HH:mm");return a>=s&&a<t}),l=r.length,n=i?0:Math.max(0,s.servicios_simultaneos_max-l);t.push({time:a,available:n,isBlocked:i,blockReason:i?F(e,a):void 0,existingAppointments:r.map(e=>({id:e.id_uuid,clientName:e.clientes.nombre,serviceName:e.servicios.nombre,duration:e.servicios.duracion_estimada}))}),u=(0,j.Z)(u,d)}return t},R=(e,a)=>{let s=(0,p.Z)(e,"yyyy-MM-dd"),t=l.find(e=>e.fecha===s);return!!t&&(!!t.dia_completo||!!t.hora_inicio&&!!t.hora_fin&&a>=t.hora_inicio&&a<=t.hora_fin)},F=(e,a)=>{let s=(0,p.Z)(e,"yyyy-MM-dd"),t=l.find(e=>e.fecha===s);return(null==t?void 0:t.motivo)||"Horario no disponible"};return(0,i.useEffect)(()=>{a&&x(Z(a))},[a,n,l,d]),(0,t.jsx)("div",{className:"h-full p-1",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-[0.6fr,1.4fr] gap-8",children:[(0,t.jsx)("div",{className:"w-full flex justify-center",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl border shadow-sm space-y-4 w-full max-w-[350px]",children:[(0,t.jsx)("div",{className:"p-4 border-b",children:(0,t.jsx)("h3",{className:"text-lg font-medium",children:"Calendario de disponibilidad"})}),(0,t.jsx)("div",{className:"flex justify-center px-2 py-4",children:(0,t.jsx)("div",{className:"w-fit",children:(0,t.jsx)(E.f,{mode:"single",selected:a||void 0,onSelect:e=>{e&&!(0,z.Z)(e,(0,D.Z)(new Date))&&s(e)},month:y,onMonthChange:N,locale:_.Z,components:{Day:e=>{let{date:i}=e;return(0,t.jsx)(H,{date:i,dayInfo:k(i),onClick:()=>{(0,z.Z)(i,(0,D.Z)(new Date))||s(i)},disabled:(0,z.Z)(i,(0,D.Z)(new Date)),isSelected:!!a&&(0,p.Z)(i,"yyyy-MM-dd")===(0,p.Z)(a,"yyyy-MM-dd")})}},className:"[&_.rdp-months]:flex [&_.rdp-months]:justify-center [&_.rdp-day]:h-8 [&_.rdp-day]:w-8 [&_.rdp-day_button]:h-8 [&_.rdp-day_button]:w-8 [&_.rdp-head_cell]:text-sm [&_.rdp-cell]:p-0"})})}),(0,t.jsx)("div",{className:"pb-4",children:(0,t.jsx)(A,{})})]})}),(0,t.jsx)("div",{className:"lg:pl-0",children:a?(0,t.jsxs)("div",{ref:S,className:"space-y-6",children:[(0,t.jsx)("div",{className:"bg-white rounded-xl border shadow-sm p-4",children:(0,t.jsxs)("h3",{className:"text-lg font-medium",children:["Horarios disponibles para ",(0,p.Z)(a,"EEEE d 'de' MMMM",{locale:_.Z})]})}),(0,t.jsx)("div",{className:"bg-white rounded-xl border shadow-sm",children:a&&h.length?(0,t.jsx)("div",{className:"p-6",children:(0,t.jsx)("div",{className:"grid grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3",children:h.map((e,s)=>{var i;let l=e.isBlocked,n=e.time===w,d=e.existingAppointments&&e.existingAppointments.length>0;return(0,t.jsxs)(r.z,{variant:"outline",className:(0,M.cn)("h-auto py-4 relative group transition-all",l?"bg-red-50 text-red-700 border-red-200 hover:bg-red-50":0===e.available?"bg-yellow-50 text-yellow-700 border-yellow-200 hover:bg-yellow-50":n?"bg-primary/20 border-primary ring-2 ring-primary ring-offset-1":"bg-green-50 text-green-700 border-green-200 hover:bg-green-100 hover:border-green-400"),disabled:l||!u||0===e.available,onClick:()=>{(0,z.Z)(a,(0,D.Z)(new Date))||(o&&o(e),C(e.time))},children:[(0,t.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,t.jsx)("span",{className:"text-base font-semibold",children:e.time}),(0,t.jsxs)("span",{className:"text-xs font-medium",children:[e.available," ",1===e.available?"espacio":"espacios"]})]}),(0,t.jsx)(P.TooltipProvider,{children:(0,t.jsxs)(P.u,{children:[(0,t.jsx)(P.aJ,{asChild:!0,children:(0,t.jsx)("div",{className:"absolute inset-0"})}),(0,t.jsx)(P._v,{side:"top",className:"w-64",children:(0,t.jsx)("div",{className:"space-y-2",children:l?(0,t.jsx)("p",{className:"text-red-600",children:e.blockReason}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("p",{className:"font-medium",children:[e.available," ",1===e.available?"espacio disponible":"espacios disponibles"]}),d&&(0,t.jsxs)("div",{className:"text-sm space-y-1",children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:"Citas agendadas:"}),null===(i=e.existingAppointments)||void 0===i?void 0:i.map((e,a)=>(0,t.jsx)("div",{className:"flex items-center gap-1",children:(0,t.jsx)("span",{children:e.serviceName})},a))]})]})})})]})})]},s)})})}):null})]}):(0,t.jsx)("div",{className:"h-full flex items-center justify-center p-8 bg-white rounded-xl border shadow-sm text-muted-foreground",children:(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)(b.Z,{className:"w-12 h-12 mx-auto text-muted-foreground/50"}),(0,t.jsx)("p",{children:"Seleccione una fecha para ver los horarios disponibles"})]})})})]})})}var B=s(66070),O=s(47625),V=s(21156),q=s(54061);function I(e){let{title:a,value:s,icon:i,description:r,trend:l=[],color:n="slate",onClick:d,className:c}=e,o=l.map(e=>({value:e}));return(0,t.jsxs)(B.Zb,{className:(0,M.cn)("transition-all duration-200 hover:shadow-md",d&&"cursor-pointer hover:scale-[1.02]",c),onClick:d,children:[(0,t.jsxs)(P.u,{children:[(0,t.jsx)(P.aJ,{asChild:!0,children:(0,t.jsxs)(B.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(B.ll,{className:"text-sm font-medium",children:a}),(0,t.jsx)("div",{className:"text-".concat(n,"-600"),children:i})]})}),(0,t.jsx)(P._v,{children:(0,t.jsx)("p",{children:r})})]}),(0,t.jsx)(B.aY,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"space-y-1",children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:s})}),(0,t.jsx)("div",{className:"h-12 w-32",children:(0,t.jsx)(O.h,{width:"100%",height:"100%",children:(0,t.jsx)(V.w,{data:o,children:(0,t.jsx)(q.x,{type:"monotone",dataKey:"value",stroke:"var(--".concat(n,"-600)"),strokeWidth:2,dot:!1})})})})]})})]})}var L=s(99376),Q=s(66438);function W(e){var a;let{open:s,onOpenChange:l,selectedDate:n,selectedSlot:o,preselectedService:m,preselectedVehicleId:x,onDateChange:f,onSlotChange:v,onSave:g,recommendedServiceId:j}=e,{toast:_}=(0,u.pm)(),[y,b]=(0,i.useState)([]),[N,w]=(0,i.useState)([]),[C,S]=(0,i.useState)(""),[Z,E]=(0,i.useState)(""),[z,D]=(0,i.useState)([]),[M,P]=(0,i.useState)(""),[R,F]=(0,i.useState)("pendiente"),[H,A]=(0,i.useState)(""),[B,O]=(0,i.useState)([]),V=(0,k.createClientComponentClient)(),q=(0,L.useRouter)(),[I,W]=(0,i.useState)(!1),[Y,J]=(0,i.useState)([]),[U,X]=(0,i.useState)([]),[$,K]=(0,i.useState)([]),G=async()=>{let[e,a]=(0,i.useState)(null),[s,t]=(0,i.useState)(""),[r,l]=(0,i.useState)({}),n=(0,L.useRouter)();(0,i.useEffect)(()=>{a(new URLSearchParams(window.location.search))},[]),(0,i.useEffect)(()=>{if(e){let a=e.get("token");if(a){t(a);let e=(0,Q.W)(a);null===e&&n.push("/login"),l(e||{})}}},[e,n]);try{let[{data:e,error:a},{data:s,error:t},{data:i,error:r}]=await Promise.all([V.from("clientes").select("*").order("nombre"),V.from("vehiculos").select("*").order("marca, modelo"),V.from("servicios").select("*").order("nombre")]);if(a)throw a;if(t)throw t;if(r)throw r;b(e||[]),w(s||[]),O(i||[])}catch(e){_({variant:"destructive",title:"Error",description:"Error al cargar la informaci\xf3n"})}},ee=async()=>{let{data:e,error:a}=await V.from("horarios_operacion").select("*").order("dia_semana");a||X(e||[])},ea=async()=>{let{data:e,error:a}=await V.from("fechas_bloqueadas").select("*");a||J(e||[])};(0,i.useEffect)(()=>{if(s){let e=async()=>{let{data:e,error:a}=await V.from("citas").select("\n            *,\n            servicios:servicio_id_uuid (\n              id_uuid,\n              nombre,\n              duracion_estimada\n            ),\n            clientes!citas_cliente_id_uuid_fkey (\n              id_uuid,\n              nombre\n            )\n          ").gte("fecha_hora",new Date().toISOString()).order("fecha_hora");a||K(e||[])};G(),e(),ee(),ea()}},[s]),(0,i.useEffect)(()=>{if(s&&N.length>0&&(m&&P(m.id_uuid),x)){let e=N.find(e=>e.id_uuid===x);e&&(E(x),S(e.id_cliente_uuid))}},[s,N,m,x]),(0,i.useEffect)(()=>{C?D(N.filter(e=>e.id_cliente_uuid===C)):D([])},[C,N]);let es=async e=>{if(e.preventDefault(),!C||!Z||!M||!n||!o){_({variant:"destructive",title:"Error",description:"Por favor complete todos los campos"});return}W(!0);try{let e="".concat(n,"T").concat(o),{data:a,error:s}=await V.from("citas").insert([{cliente_id_uuid:C,vehiculo_id_uuid:Z,servicio_id_uuid:M,fecha_hora:e,estado:R,notas:H,recommended_service_id:j||null}]).select().single();if(s)throw s;if(j){let{error:e}=await V.from("recommended_services").update({status:"scheduled"}).eq("id",j);if(e)throw e;_({title:"Cita agendada",description:"La cita se ha creado y el servicio recomendado ha sido actualizado",duration:5e3})}else _({title:"Cita agendada",description:"La cita se ha creado exitosamente"});l(!1),g(),q.replace("/citas")}catch(e){console.error("Error:",e),_({variant:"destructive",title:"Error",description:"Error al agendar la cita"})}finally{W(!1)}};return(0,t.jsx)(d.Vq,{open:s,onOpenChange:l,children:(0,t.jsxs)(d.cZ,{className:"max-w-4xl",children:[(0,t.jsxs)(d.fK,{children:[(0,t.jsx)(d.$N,{children:"Agendar Nueva Cita"}),(0,t.jsx)(d.Be,{children:"Complete los datos de la cita. Todos los campos son obligatorios."})]}),(0,t.jsxs)("form",{onSubmit:es,children:[(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(c._,{htmlFor:"cliente",className:"text-right",children:"Cliente"}),(0,t.jsx)("div",{className:"col-span-3",children:(0,t.jsxs)(h.Ph,{value:C,onValueChange:S,children:[(0,t.jsx)(h.i4,{children:(0,t.jsx)(h.ki,{placeholder:"Seleccione un cliente"})}),(0,t.jsx)(h.Bw,{children:y.map(e=>(0,t.jsx)(h.Ql,{value:e.id_uuid,children:e.nombre},e.id_uuid))})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(c._,{htmlFor:"vehiculo",className:"text-right",children:"Veh\xedculo"}),(0,t.jsx)("div",{className:"col-span-3",children:(0,t.jsxs)(h.Ph,{value:Z,onValueChange:E,disabled:!C,children:[(0,t.jsx)(h.i4,{children:(0,t.jsx)(h.ki,{placeholder:C?"Seleccione un veh\xedculo":"Primero seleccione un cliente"})}),(0,t.jsx)(h.Bw,{children:z.map(e=>(0,t.jsx)(h.Ql,{value:e.id_uuid,children:"".concat(e.marca," ").concat(e.modelo).concat(e.placa?" (".concat(e.placa,")"):"")},e.id_uuid))})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(c._,{htmlFor:"servicio",className:"text-right",children:"Servicio"}),(0,t.jsx)("div",{className:"col-span-3",children:(0,t.jsxs)(h.Ph,{value:M,onValueChange:P,children:[(0,t.jsx)(h.i4,{children:(0,t.jsx)(h.ki,{placeholder:"Seleccione un servicio"})}),(0,t.jsx)(h.Bw,{children:B.map(e=>(0,t.jsxs)(h.Ql,{value:e.id_uuid,children:[e.nombre," (",e.duracion_estimada," min)"]},e.id_uuid))})]})})]}),(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-4 items-start gap-4",children:[(0,t.jsx)(c._,{className:"text-right pt-4",children:"Fecha y Hora"}),(0,t.jsx)("div",{className:"col-span-3",children:(0,t.jsxs)("div",{className:"grid grid-cols-[400px,1fr] gap-6",children:[(0,t.jsx)("div",{className:"bg-white rounded-xl border shadow-sm",children:(0,t.jsx)(T,{selectedDate:n?new Date(n):null,onSelect:e=>f((0,p.Z)(e,"yyyy-MM-dd")),blockedDates:Y,operatingHours:U,turnDuration:15,appointments:$,onTimeSlotSelect:e=>v(e.time),selectedService:M?{id:M,duration:(null===(a=B.find(e=>e.id_uuid===M))||void 0===a?void 0:a.duracion_estimada)||0}:void 0})}),(0,t.jsx)("div",{className:"bg-white rounded-xl border shadow-sm",children:(0,t.jsx)("div",{className:"p-4",children:(0,t.jsx)("h3",{className:"text-lg font-medium",children:"Horarios disponibles"})})})]})})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(c._,{htmlFor:"estado",className:"text-right",children:"Estado"}),(0,t.jsx)("div",{className:"col-span-3",children:(0,t.jsxs)(h.Ph,{value:R,onValueChange:e=>F(e),children:[(0,t.jsx)(h.i4,{children:(0,t.jsx)(h.ki,{placeholder:"Seleccione un estado"})}),(0,t.jsxs)(h.Bw,{children:[(0,t.jsx)(h.Ql,{value:"pendiente",children:"Pendiente"}),(0,t.jsx)(h.Ql,{value:"en_proceso",children:"En Proceso"}),(0,t.jsx)(h.Ql,{value:"completada",children:"Completada"}),(0,t.jsx)(h.Ql,{value:"cancelada",children:"Cancelada"})]})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(c._,{htmlFor:"notas",className:"text-right",children:"Notas"}),(0,t.jsx)("div",{className:"col-span-3",children:(0,t.jsx)("textarea",{value:H,onChange:e=>A(e.target.value),placeholder:"Agregue notas adicionales aqu\xed...",className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm"})})]})]}),(0,t.jsx)(d.cN,{children:(0,t.jsx)(r.z,{type:"submit",disabled:I,className:"relative",children:I?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"opacity-0",children:"Agendar Cita"}),(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,t.jsx)("div",{className:"h-5 w-5 animate-spin rounded-full border-b-2 border-white"})})]}):"Agendar Cita"})})]})]})})}var Y=s(76818);let J="completada",U={es:_.Z};(0,x.lD)({format:p.Z,parse:f.Z,startOfWeek:v.Z,getDay:g.Z,locales:U});let X=e=>{let{open:a,onOpenChange:s,cita:n,onComplete:m}=e,{toast:x}=(0,u.pm)(),[p,f]=(0,i.useState)(null),[v,g]=(0,i.useState)(!1),[j,_]=(0,i.useState)([]),y=async()=>{g(!0);try{let{error:e}=await o.O.from("citas").update({estado:"completada"}).eq("id_uuid",n.id_uuid);if(e)throw e;let{error:a}=await o.O.from("transacciones_servicio").insert({id_cita:n.id_uuid,estado:"pendiente",fecha_transaccion:new Date().toISOString()});if(a)throw a;if(p&&j.length>0){let e=j.map(e=>({appointment_id:n.id_uuid,vehicle_id:n.vehiculo_id_uuid,service_name:e.service_name,service_description:e.service_description,urgency_level:e.urgency_level,estimated_time:e.estimated_time,estimated_cost:e.estimated_cost,technical_notes:e.technical_notes,status:"pending"})),{error:a}=await o.O.from("recommended_services").insert(e);if(a)throw a}m(),x({title:"Servicio completado",description:"La cita ha sido completada exitosamente"})}catch(e){console.error("Error completo:",e),x({variant:"destructive",title:"Error",description:e.message||"Hubo un error al completar el servicio"})}finally{g(!1)}};return(0,t.jsx)(d.Vq,{open:a,onOpenChange:s,children:(0,t.jsxs)(d.cZ,{className:"max-w-4xl",children:[(0,t.jsxs)(d.fK,{children:[(0,t.jsx)(d.$N,{children:"Revisi\xf3n Final de Servicio"}),(0,t.jsx)(d.Be,{children:"Complete los detalles del servicio realizado"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-medium",children:"Servicios Adicionales Detectados"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{children:"\xbfSe detectaron servicios adicionales recomendados?"}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)(r.z,{variant:!0===p?"default":"outline",onClick:()=>f(!0),children:"S\xed"}),(0,t.jsx)(r.z,{variant:!1===p?"default":"outline",onClick:()=>{f(!1),_([])},children:"No"})]})]}),p&&(0,t.jsxs)("div",{className:"space-y-4",children:[j.map((e,a)=>(0,t.jsxs)("div",{className:"border rounded-md p-4 space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("h4",{className:"font-medium",children:["Servicio Adicional #",a+1]}),(0,t.jsx)(r.z,{variant:"ghost",size:"sm",onClick:()=>{_(j.filter((e,s)=>s!==a))},children:"Eliminar"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{children:"Nombre del Servicio"}),(0,t.jsx)(l.I,{value:e.service_name,onChange:e=>{let s=[...j];s[a].service_name=e.target.value,_(s)}})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{children:"Nivel de Urgencia"}),(0,t.jsxs)(h.Ph,{value:e.urgency_level,onValueChange:e=>{let s=[...j];s[a].urgency_level=e,_(s)},children:[(0,t.jsx)(h.i4,{children:(0,t.jsx)(h.ki,{})}),(0,t.jsxs)(h.Bw,{children:[(0,t.jsx)(h.Ql,{value:"high",children:"Alta"}),(0,t.jsx)(h.Ql,{value:"medium",children:"Media"}),(0,t.jsx)(h.Ql,{value:"low",children:"Baja"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{children:"Tiempo Estimado (minutos)"}),(0,t.jsx)(l.I,{type:"number",value:e.estimated_time,onChange:e=>{let s=[...j];s[a].estimated_time=Number(e.target.value),_(s)}})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{children:"Costo Estimado ($)"}),(0,t.jsx)(l.I,{type:"number",value:e.estimated_cost,onChange:e=>{let s=[...j];s[a].estimated_cost=Number(e.target.value),_(s)}})]}),(0,t.jsxs)("div",{className:"col-span-2 space-y-2",children:[(0,t.jsx)(c._,{children:"Descripci\xf3n"}),(0,t.jsx)(Y.g,{value:e.service_description,onChange:e=>{let s=[...j];s[a].service_description=e.target.value,_(s)}})]}),(0,t.jsxs)("div",{className:"col-span-2 space-y-2",children:[(0,t.jsx)(c._,{children:"Notas T\xe9cnicas"}),(0,t.jsx)(Y.g,{value:e.technical_notes,onChange:e=>{let s=[...j];s[a].technical_notes=e.target.value,_(s)}})]})]})]},a)),(0,t.jsx)(r.z,{type:"button",variant:"outline",onClick:()=>{_([...j,{service_name:"",service_description:"",urgency_level:"medium",estimated_time:0,estimated_cost:0,technical_notes:""}])},children:"Agregar Servicio Adicional"})]})]}),(0,t.jsxs)(d.cN,{children:[(0,t.jsx)(r.z,{variant:"outline",onClick:()=>s(!1),children:"Cancelar"}),(0,t.jsx)(r.z,{onClick:y,disabled:v,children:v?"Guardando...":"Completar Servicio"})]})]})})};function $(){let[e,a]=(0,i.useState)(null),[s,d]=(0,i.useState)(""),[c,o]=(0,i.useState)({}),x=(0,L.useRouter)();(0,i.useEffect)(()=>{a(new URLSearchParams(window.location.search))},[]),(0,i.useEffect)(()=>{if(e){let a=e.get("token");if(a){d(a);let e=(0,Q.W)(a);null===e&&x.push("/login"),o(e||{})}}},[e,x]);let{toast:f}=(0,u.pm)(),[v,g]=(0,i.useState)([]),[j,E]=(0,i.useState)([]),[z,D]=(0,i.useState)([]),[M,P]=(0,i.useState)(!1),[R,F]=(0,i.useState)(!1),[H,A]=(0,i.useState)({cliente_id_uuid:"",servicio_id_uuid:"",fecha_hora:"",estado:"pendiente",notas:""}),[B,O]=(0,i.useState)("calendario"),[V,q]=(0,i.useState)(""),[Y,U]=(0,i.useState)("todos"),$=(0,k.createClientComponentClient)(),[K,G]=(0,i.useState)(15),[ee,ea]=(0,i.useState)(null),[es,et]=(0,i.useState)(""),[ei,er]=(0,i.useState)([]),[el,en]=(0,i.useState)([]),[ed,ec]=(0,i.useState)(null),[eo,eu]=(0,i.useState)("service"),[em,eh]=(0,i.useState)(""),[ex,ep]=(0,i.useState)(!1),[ef,ev]=(0,i.useState)(null),eg=(0,L.useSearchParams)(),[ej,e_]=(0,i.useState)(null),ey=async()=>{try{let{data:e,error:a}=await $.from("clientes").select("id_uuid, nombre");if(a)throw a;let{data:s,error:t}=await $.from("servicios").select("id_uuid, nombre, duracion_estimada");if(t)throw t;let{data:i,error:r}=await $.from("citas").select("\n          id_uuid,\n          cliente_id_uuid,\n          servicio_id_uuid,\n          vehiculo_id_uuid,\n          fecha_hora,\n          estado,\n          notas,\n          created_at,\n          clientes!citas_cliente_id_uuid_fkey (\n            id_uuid,\n            nombre\n          ),\n          servicios!citas_servicio_id_uuid_fkey (\n            id_uuid,\n            nombre,\n            duracion_estimada\n          ),\n          vehiculos!citas_vehiculo_id_uuid_fkey (\n            id_uuid,\n            marca,\n            modelo,\n            placa,\n            id_cliente_uuid\n          )\n        ").order("fecha_hora",{ascending:!0});if(r)throw r;E(e||[]),D(s||[]),g(i||[])}catch(e){console.error("Error al cargar datos:",e),f({variant:"destructive",title:"Error",description:"No se pudieron cargar los datos"})}};(0,i.useEffect)(()=>{ey()},[]),(0,i.useEffect)(()=>{(async()=>{let{data:e,error:a}=await $.from("configuracion_taller").select("duracion_turno").single();!a&&e&&G(e.duracion_turno)})()},[]),(0,i.useEffect)(()=>{let e=async()=>{let{data:e,error:a}=await $.from("fechas_bloqueadas").select("*");a||er(e||[])};(async()=>{let{data:e,error:a}=await $.from("horarios_operacion").select("*").order("dia_semana");a||en(e||[])})(),e()},[]),(0,i.useEffect)(()=>{let e=eg.get("action"),a=eg.get("vehicle_id"),s=eg.get("recommended_service_id");"create"===e&&a&&s&&(async()=>{let{data:e,error:t}=await $.from("recommended_services").select("*").eq("id",s).single();if(!t&&e&&(e_(a),P(!0),e.service_name)){let a=z.find(a=>a.nombre.toLowerCase()===e.service_name.toLowerCase());a&&ec(a)}})()},[eg,z]),(0,i.useEffect)(()=>{console.log("Estado actualizado - clientes:",j),console.log("Estado actualizado - servicios:",z)},[j,z]);let eb=v.filter(e=>{let a="todos"===Y||e.estado===Y,s=!V||e.fecha_hora.startsWith(V);return a&&s}),eN=async(e,a)=>{if(a===J){let a=v.find(a=>a.id_uuid===e)||null;ep(!0),ev(a);return}if(await new Promise(e=>{e(window.confirm("\xbfEst\xe1s seguro de que deseas cambiar el estado de la cita a ".concat(a,"?")))}))try{let{data:i,error:l}=await $.from("citas").update({estado:a}).eq("id_uuid",e).select();if(l)throw l;g(v.map(s=>s.id_uuid===e?{...s,estado:a}:s)),"completada"===a?f({title:"Cita completada",description:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{children:"La cita ha sido marcada como completada"}),(0,t.jsx)(r.z,{asChild:!0,children:(0,t.jsx)(Z.default,{href:"/transacciones/nueva?id_cita=".concat(e,"&token=").concat(s),children:"Crear Transacci\xf3n"})})]})}):f({title:"Estado actualizado",description:"La cita ha sido marcada como ".concat(a)})}catch(e){f({variant:"destructive",title:"Error",description:"No se pudo actualizar el estado"})}},ew=()=>{let e=v.length,a=v.filter(e=>"pendiente"===e.estado).length;return{total:e,pendiente:a,enProceso:v.filter(e=>"en_proceso"===e.estado).length,completada:v.filter(e=>"completada"===e.estado).length,cancelada:v.filter(e=>"cancelada"===e.estado).length}};return(0,t.jsx)("div",{className:"min-h-screen",children:(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-5",children:[(0,t.jsx)(I,{title:"Total de Citas",value:ew().total,description:"Todas las citas",icon:(0,t.jsx)(b.Z,{className:"h-4 w-4 text-gray-600"}),className:"bg-white"}),(0,t.jsx)(I,{title:"Pendientes",value:ew().pendiente,description:"Citas por atender",icon:(0,t.jsx)(N.Z,{className:"h-4 w-4 text-yellow-600"}),className:"bg-white border-yellow-200"}),(0,t.jsx)(I,{title:"En Proceso",value:ew().enProceso,description:"Citas en curso",icon:(0,t.jsx)(w.Z,{className:"h-4 w-4 text-blue-600"}),className:"bg-white border-blue-200"}),(0,t.jsx)(I,{title:"Completadas",value:ew().completada,description:"Citas finalizadas",icon:(0,t.jsx)(C.Z,{className:"h-4 w-4 text-green-600"}),className:"bg-white border-green-200"}),(0,t.jsx)(I,{title:"Canceladas",value:ew().cancelada,description:"Citas canceladas",icon:(0,t.jsx)(S.Z,{className:"h-4 w-4 text-red-600"}),className:"bg-white border-red-200"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg",children:[(0,t.jsx)("div",{className:"p-4 border-b",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("h3",{className:"text-lg font-medium",children:"Seleccionar Servicio"}),(0,t.jsxs)(h.Ph,{value:(null==ed?void 0:ed.id_uuid)||"",onValueChange:e=>{ec(z.find(a=>a.id_uuid===e)||null)},children:[(0,t.jsx)(h.i4,{className:"w-[300px]",children:(0,t.jsx)(h.ki,{placeholder:"Seleccione un servicio para agendar"})}),(0,t.jsx)(h.Bw,{children:z.map(e=>(0,t.jsxs)(h.Ql,{value:e.id_uuid,children:[e.nombre," (",e.duracion_estimada," min)"]},e.id_uuid))})]})]})}),(0,t.jsx)(T,{selectedDate:ee,onSelect:e=>ea(e||null),blockedDates:ei,operatingHours:el,turnDuration:K,appointments:v,onTimeSlotSelect:e=>{if(!ed){f({title:"Seleccione un servicio",description:"Debe seleccionar un servicio antes de elegir un horario",variant:"destructive"});return}ea(ee),et(e.time),P(!0)},selectedService:ed?{id:ed.id_uuid,duration:ed.duracion_estimada}:void 0})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 space-y-4",children:[(0,t.jsx)("h2",{className:"text-lg font-medium",children:"Lista de Citas"}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)(l.I,{placeholder:"Buscar citas...",value:em,onChange:e=>eh(e.target.value),className:"w-[300px]"}),(0,t.jsxs)("div",{className:"flex bg-muted rounded-lg p-1",children:[(0,t.jsx)(r.z,{variant:"pendiente"===Y?"secondary":"ghost",size:"sm",onClick:()=>U("pendiente"),className:"text-sm",children:"Pendientes"}),(0,t.jsx)(r.z,{variant:"en_proceso"===Y?"secondary":"ghost",size:"sm",onClick:()=>U("en_proceso"),className:"text-sm",children:"En Proceso"}),(0,t.jsx)(r.z,{variant:"completada"===Y?"secondary":"ghost",size:"sm",onClick:()=>U("completada"),className:"text-sm",children:"Completadas"}),(0,t.jsx)(r.z,{variant:"todos"===Y?"secondary":"ghost",size:"sm",onClick:()=>U("todos"),className:"text-sm",children:"Todas"})]})]}),(0,t.jsxs)(n.iA,{children:[(0,t.jsx)(n.xD,{children:(0,t.jsxs)(n.SC,{children:[(0,t.jsx)(n.ss,{children:"Cliente"}),(0,t.jsx)(n.ss,{children:"Servicio"}),(0,t.jsx)(n.ss,{children:"Veh\xedculo"}),(0,t.jsx)(n.ss,{children:"Fecha y Hora"}),(0,t.jsx)(n.ss,{children:"Estado"}),(0,t.jsx)(n.ss,{children:"Notas"}),(0,t.jsx)(n.ss,{className:"text-right",children:"Acciones"})]})}),(0,t.jsxs)(n.RM,{children:[eb.map(e=>{var a,i,l,d,c;return(0,t.jsxs)(n.SC,{children:[(0,t.jsx)(n.pj,{children:null===(a=e.clientes)||void 0===a?void 0:a.nombre}),(0,t.jsx)(n.pj,{children:null===(i=e.servicios)||void 0===i?void 0:i.nombre}),(0,t.jsx)(n.pj,{children:(0,t.jsxs)(Z.default,{href:"/vehiculos?id=".concat(e.vehiculo_id_uuid,"&token=").concat(s),className:"text-blue-600 hover:underline",children:[null===(l=e.vehiculos)||void 0===l?void 0:l.marca," ",null===(d=e.vehiculos)||void 0===d?void 0:d.modelo,(null===(c=e.vehiculos)||void 0===c?void 0:c.placa)&&" (".concat(e.vehiculos.placa,")")]})}),(0,t.jsx)(n.pj,{children:(0,p.Z)(new Date(e.fecha_hora),"PPP 'a las' p",{locale:_.Z})}),(0,t.jsx)(n.pj,{children:(0,t.jsx)("span",{className:"inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ".concat("completada"===e.estado?"bg-green-100 text-green-800":"cancelada"===e.estado?"bg-red-100 text-red-800":"en_proceso"===e.estado?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"),children:e.estado})}),(0,t.jsx)(n.pj,{children:e.notas}),(0,t.jsx)(n.pj,{className:"text-right",children:(0,t.jsxs)(y.h_,{children:[(0,t.jsx)(y.$F,{asChild:!0,children:(0,t.jsx)(r.z,{variant:"outline",className:"h-8 px-2 py-0",children:(0,t.jsx)("span",{children:"Cambiar Estado"})})}),(0,t.jsxs)(y.AW,{align:"end",children:[e.estado!==J&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.Xi,{onClick:()=>eN(e.id_uuid,"en_proceso"),children:"Iniciar"}),(0,t.jsx)(y.Xi,{onClick:()=>eN(e.id_uuid,J),children:"Completar"}),(0,t.jsx)(y.Xi,{onClick:()=>eN(e.id_uuid,"cancelada"),children:"Cancelar"})]}),e.estado===J&&(0,t.jsx)(y.Xi,{asChild:!0,children:(0,t.jsx)(Z.default,{href:"/transacciones?id_cita=".concat(e.id_uuid,"&token=").concat(s),children:"Crear Transacci\xf3n"})})]})]})})]},e.id_uuid)}),0===eb.length&&(0,t.jsx)(n.SC,{children:(0,t.jsx)(n.pj,{colSpan:6,className:"text-center py-4",children:"No hay citas que mostrar"})})]})]})]}),(0,t.jsx)(W,{open:M,onOpenChange:P,selectedDate:ee?(0,p.Z)(ee,"yyyy-MM-dd"):null,selectedSlot:es||null,preselectedService:ed,preselectedVehicleId:ej,recommendedServiceId:eg.get("recommended_service_id"),onDateChange:e=>{let a=new Date(e);a.setHours(0,0,0,0),ea(a)},onSlotChange:et,onSave:()=>{ey(),ec(null),ea(null),et(""),e_(null),eu("service")}}),(0,t.jsx)(X,{open:ex,onOpenChange:ep,cita:ef,onComplete:()=>{ef&&(eN(ef.id_uuid,"completada"),ep(!1))}}),(0,t.jsx)(m.x,{})]})})}function K(){return(0,t.jsx)("div",{className:"flex-1 p-8",children:(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Citas"}),(0,t.jsx)("p",{className:"text-gray-500 mt-2"})]}),(0,t.jsx)(i.Suspense,{fallback:(0,t.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})}),children:(0,t.jsx)($,{})})]})})}},1098:function(e,a,s){"use strict";s.d(a,{f:function(){return c}});var t=s(57437);s(2265);var i=s(92451),r=s(10407),l=s(78076),n=s(94508),d=s(62869);function c(e){let{className:a,classNames:s,showOutsideDays:c=!0,...o}=e;return(0,t.jsx)(l._W,{showOutsideDays:c,className:(0,n.cn)("p-3",a),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,n.cn)((0,d.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:(0,n.cn)("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md","range"===o.mode?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:(0,n.cn)((0,d.d)({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...s},components:{IconLeft:e=>{let{className:a,...s}=e;return(0,t.jsx)(i.Z,{className:(0,n.cn)("h-4 w-4",a),...s})},IconRight:e=>{let{className:a,...s}=e;return(0,t.jsx)(r.Z,{className:(0,n.cn)("h-4 w-4",a),...s})}},...o})}c.displayName="Calendar"},66070:function(e,a,s){"use strict";s.d(a,{Ol:function(){return n},Zb:function(){return l},aY:function(){return c},ll:function(){return d}});var t=s(57437),i=s(2265),r=s(94508);let l=i.forwardRef((e,a)=>{let{className:s,...i}=e;return(0,t.jsx)("div",{ref:a,className:(0,r.cn)("rounded-xl border bg-card text-card-foreground shadow",s),...i})});l.displayName="Card";let n=i.forwardRef((e,a)=>{let{className:s,...i}=e;return(0,t.jsx)("div",{ref:a,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",s),...i})});n.displayName="CardHeader";let d=i.forwardRef((e,a)=>{let{className:s,...i}=e;return(0,t.jsx)("h3",{ref:a,className:(0,r.cn)("font-semibold leading-none tracking-tight",s),...i})});d.displayName="CardTitle",i.forwardRef((e,a)=>{let{className:s,...i}=e;return(0,t.jsx)("p",{ref:a,className:(0,r.cn)("text-sm text-muted-foreground",s),...i})}).displayName="CardDescription";let c=i.forwardRef((e,a)=>{let{className:s,...i}=e;return(0,t.jsx)("div",{ref:a,className:(0,r.cn)("p-6 pt-0",s),...i})});c.displayName="CardContent"},53647:function(e,a,s){"use strict";s.d(a,{Bw:function(){return m},Ph:function(){return c},Ql:function(){return h},i4:function(){return u},ki:function(){return o}});var t=s(57437),i=s(2265),r=s(56873),l=s(40875),n=s(30401),d=s(94508);let c=r.fC;r.ZA;let o=r.B4,u=i.forwardRef((e,a)=>{let{className:s,children:i,...n}=e;return(0,t.jsxs)(r.xz,{ref:a,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...n,children:[i,(0,t.jsx)(r.JO,{asChild:!0,children:(0,t.jsx)(l.Z,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=r.xz.displayName;let m=i.forwardRef((e,a)=>{let{className:s,children:i,position:l="popper",...n}=e;return(0,t.jsx)(r.h_,{children:(0,t.jsx)(r.VY,{ref:a,className:(0,d.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:l,...n,children:(0,t.jsx)(r.l_,{className:(0,d.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:i})})})});m.displayName=r.VY.displayName,i.forwardRef((e,a)=>{let{className:s,...i}=e;return(0,t.jsx)(r.__,{ref:a,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...i})}).displayName=r.__.displayName;let h=i.forwardRef((e,a)=>{let{className:s,children:i,...l}=e;return(0,t.jsxs)(r.ck,{ref:a,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...l,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(r.wU,{children:(0,t.jsx)(n.Z,{className:"h-4 w-4"})})}),(0,t.jsx)(r.eT,{children:i})]})});h.displayName=r.ck.displayName,i.forwardRef((e,a)=>{let{className:s,...i}=e;return(0,t.jsx)(r.Z0,{ref:a,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",s),...i})}).displayName=r.Z0.displayName},76818:function(e,a,s){"use strict";s.d(a,{g:function(){return l}});var t=s(57437),i=s(2265),r=s(94508);let l=i.forwardRef((e,a)=>{let{className:s,...i}=e;return(0,t.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...i})});l.displayName="Textarea"},81103:function(e,a,s){"use strict";s.d(a,{TooltipProvider:function(){return n},_v:function(){return o},aJ:function(){return c},u:function(){return d}});var t=s(57437),i=s(2265),r=s(61312),l=s(94508);let n=r.zt,d=r.fC,c=r.xz,o=i.forwardRef((e,a)=>{let{className:s,sideOffset:i=4,...n}=e;return(0,t.jsx)(r.VY,{ref:a,sideOffset:i,className:(0,l.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n})});o.displayName=r.VY.displayName}},function(e){e.O(0,[1834,8218,2856,6137,3777,5452,8841,3314,6008,5055,3513,2130,7648,464,51,1218,276,1312,5098,6495,1915,6696,365,2971,2117,1744],function(){return e(e.s=40659)}),_N_E=e.O()}]);