(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[672],{10305:function(e,i,r){Promise.resolve().then(r.bind(r,58686))},58686:function(e,i,r){"use strict";r.r(i),r.d(i,{default:function(){return ServiciosPage}});var s=r(57437),a=r(2265),c=r(23611),n=r(35831),t=r(66005),o=r(62031),d=r(61465),l=r(12899),u=r(71271),m=r(14150),p=r(45487),h=r(17472);function ServiciosPage(){let{toast:e}=(0,u.pm)(),[i,r]=(0,a.useState)([]),[x,v]=(0,a.useState)(!1),[j,f]=(0,a.useState)(!1),[g,b]=(0,a.useState)({nombre:"",descripcion:"",duracion_estimada:0,precio:0}),[N,y]=(0,a.useState)(null),[_,I]=(0,a.useState)(!1);async function cargarServicios(){let{data:i,error:s}=await l.O.from("servicios").select("*").order("nombre");if(s){e({variant:"destructive",title:"Error",description:"No se pudieron cargar los servicios"});return}r(i)}(0,a.useEffect)(()=>{cargarServicios()},[]);let formatPrice=e=>new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS"}).format(e),handleSubmit=async s=>{if(s.preventDefault(),!g.nombre.trim()){e({variant:"destructive",title:"Error de validaci\xf3n",description:"El nombre es obligatorio"});return}if(g.duracion_estimada<=0){e({variant:"destructive",title:"Error de validaci\xf3n",description:"La duraci\xf3n debe ser mayor a 0 minutos"});return}if(g.precio<0){e({variant:"destructive",title:"Error de validaci\xf3n",description:"El precio no puede ser negativo"});return}f(!0);try{let{data:s,error:a}=await l.O.from("servicios").insert([{nombre:g.nombre,descripcion:g.descripcion,duracion_estimada:g.duracion_estimada,precio:g.precio}]).select();if(a)throw a;s&&(e({title:"Servicio guardado",description:"El servicio se ha registrado correctamente"}),r([...i,s[0]]),v(!1),b({nombre:"",descripcion:"",duracion_estimada:0,precio:0}))}catch(i){e({variant:"destructive",title:"Error",description:"Hubo un problema al guardar el servicio"})}finally{f(!1)}},handleUpdate=async s=>{if(s.preventDefault(),!N.nombre.trim()){e({variant:"destructive",title:"Error de validaci\xf3n",description:"El nombre es obligatorio"});return}if(N.duracion_estimada<=0){e({variant:"destructive",title:"Error de validaci\xf3n",description:"La duraci\xf3n debe ser mayor a 0 minutos"});return}if(N.precio<0){e({variant:"destructive",title:"Error de validaci\xf3n",description:"El precio no puede ser negativo"});return}if(window.confirm("\xbfEst\xe1 seguro de guardar los cambios?")){f(!0);try{let{data:s,error:a}=await l.O.from("servicios").update({nombre:N.nombre,descripcion:N.descripcion,duracion_estimada:N.duracion_estimada,precio:N.precio}).eq("id",N.id).select();if(a)throw a;s&&(e({title:"Servicio actualizado",description:"Los cambios se han guardado correctamente"}),r(i.map(e=>e.id===N.id?s[0]:e)),I(!1),y(null))}catch(i){e({variant:"destructive",title:"Error",description:"Hubo un problema al actualizar el servicio"})}finally{f(!1)}}};return(0,s.jsxs)("div",{className:"container mx-auto py-10",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Servicios"}),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)(n.I,{placeholder:"Buscar servicios...",className:"max-w-sm"}),(0,s.jsx)(c.z,{onClick:()=>v(!0),children:"A\xf1adir Nuevo Servicio"})]}),(0,s.jsxs)(t.iA,{children:[(0,s.jsx)(t.xD,{children:(0,s.jsxs)(t.SC,{children:[(0,s.jsx)(t.ss,{children:"Nombre"}),(0,s.jsx)(t.ss,{children:"Descripci\xf3n"}),(0,s.jsx)(t.ss,{children:"Duraci\xf3n (min)"}),(0,s.jsx)(t.ss,{children:"Precio"}),(0,s.jsx)(t.ss,{className:"text-right",children:"Acciones"})]})}),(0,s.jsx)(t.RM,{children:i.map(e=>(0,s.jsxs)(t.SC,{children:[(0,s.jsx)(t.pj,{className:"font-medium",children:e.nombre}),(0,s.jsx)(t.pj,{children:e.descripcion}),(0,s.jsxs)(t.pj,{children:[e.duracion_estimada," min"]}),(0,s.jsx)(t.pj,{children:formatPrice(e.precio)}),(0,s.jsx)(t.pj,{className:"text-right",children:(0,s.jsxs)(p.h_,{children:[(0,s.jsx)(p.$F,{asChild:!0,children:(0,s.jsxs)(c.z,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,s.jsx)("span",{className:"sr-only",children:"Abrir men\xfa"}),(0,s.jsx)(h.Z,{className:"h-4 w-4"})]})}),(0,s.jsxs)(p.AW,{align:"end",children:[(0,s.jsx)(p.Ju,{children:"Acciones"}),(0,s.jsx)(p.Xi,{onClick:()=>{y(e),I(!0)},children:"Editar servicio"})]})]})})]},e.id))})]}),(0,s.jsx)(o.Vq,{open:x,onOpenChange:v,children:(0,s.jsxs)(o.cZ,{children:[(0,s.jsxs)(o.fK,{children:[(0,s.jsx)(o.$N,{children:"A\xf1adir Nuevo Servicio"}),(0,s.jsx)(o.Be,{children:"Complete los datos del nuevo servicio. Los campos marcados con * son obligatorios."})]}),(0,s.jsxs)("form",{onSubmit:handleSubmit,children:[(0,s.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(d._,{htmlFor:"nombre",className:"text-right",children:"Nombre *"}),(0,s.jsx)(n.I,{id:"nombre",className:"col-span-3",value:g.nombre,onChange:e=>b({...g,nombre:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(d._,{htmlFor:"descripcion",className:"text-right",children:"Descripci\xf3n"}),(0,s.jsx)(n.I,{id:"descripcion",className:"col-span-3",value:g.descripcion,onChange:e=>b({...g,descripcion:e.target.value})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(d._,{htmlFor:"duracion",className:"text-right",children:"Duraci\xf3n (min) *"}),(0,s.jsx)(n.I,{id:"duracion",type:"number",min:"1",className:"col-span-3",value:g.duracion_estimada,onChange:e=>b({...g,duracion_estimada:Number(e.target.value)}),required:!0})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(d._,{htmlFor:"precio",className:"text-right",children:"Precio *"}),(0,s.jsx)(n.I,{id:"precio",type:"number",min:"0",step:"0.01",className:"col-span-3",value:g.precio,onChange:e=>b({...g,precio:Number(e.target.value)}),required:!0})]})]}),(0,s.jsx)(o.cN,{children:(0,s.jsx)(c.z,{type:"submit",disabled:j,children:j?"Guardando...":"Guardar Servicio"})})]})]})}),(0,s.jsx)(o.Vq,{open:_,onOpenChange:I,children:(0,s.jsxs)(o.cZ,{children:[(0,s.jsxs)(o.fK,{children:[(0,s.jsx)(o.$N,{children:"Editar Servicio"}),(0,s.jsx)(o.Be,{children:"Modifique los datos del servicio."})]}),(0,s.jsxs)("form",{onSubmit:handleUpdate,children:[(0,s.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(d._,{htmlFor:"edit-nombre",className:"text-right",children:"Nombre *"}),(0,s.jsx)(n.I,{id:"edit-nombre",className:"col-span-3",value:null==N?void 0:N.nombre,onChange:e=>y(i=>i?{...i,nombre:e.target.value}:i),required:!0})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(d._,{htmlFor:"edit-descripcion",className:"text-right",children:"Descripci\xf3n"}),(0,s.jsx)(n.I,{id:"edit-descripcion",className:"col-span-3",value:null==N?void 0:N.descripcion,onChange:e=>y(i=>i?{...i,descripcion:e.target.value}:i)})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(d._,{htmlFor:"edit-duracion",className:"text-right",children:"Duraci\xf3n (min) *"}),(0,s.jsx)(n.I,{id:"edit-duracion",type:"number",min:"1",className:"col-span-3",value:null==N?void 0:N.duracion_estimada,onChange:e=>y(i=>i?{...i,duracion_estimada:Number(e.target.value)}:i),required:!0})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(d._,{htmlFor:"edit-precio",className:"text-right",children:"Precio *"}),(0,s.jsx)(n.I,{id:"edit-precio",type:"number",min:"0",step:"0.01",className:"col-span-3",value:null==N?void 0:N.precio,onChange:e=>y(i=>i?{...i,precio:Number(e.target.value)}:i),required:!0})]})]}),(0,s.jsx)(o.cN,{children:(0,s.jsx)(c.z,{type:"submit",disabled:j,children:j?"Guardando...":"Guardar Cambios"})})]})]})}),(0,s.jsx)(m.x,{})]})}},12899:function(e,i,r){"use strict";r.d(i,{O:function(){return a}});var s=r(54566);let a=(0,s.eI)("https://kronhxyuinsrsoezbtni.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imtyb25oeHl1aW5zcnNvZXpidG5pIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzU5NTkxMzQsImV4cCI6MjA1MTUzNTEzNH0.AFL2xKo1lasYJPwURdCKkEp_BWudW-8vDmEY6w2MY1I")},36743:function(e,i,r){"use strict";r.d(i,{f:function(){return t}});var s=r(2265),a=r(9381),c=r(57437),n=s.forwardRef((e,i)=>(0,c.jsx)(a.WV.label,{...e,ref:i,onMouseDown:i=>{let r=i.target;r.closest("button, input, select, textarea")||(e.onMouseDown?.(i),!i.defaultPrevented&&i.detail>1&&i.preventDefault())}}));n.displayName="Label";var t=n},8281:function(e,i,r){"use strict";r.d(i,{T:function(){return n},f:function(){return t}});var s=r(2265),a=r(9381),c=r(57437),n=s.forwardRef((e,i)=>(0,c.jsx)(a.WV.span,{...e,ref:i,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));n.displayName="VisuallyHidden";var t=n}},function(e){e.O(0,[660,682,863,108,160,829,361,685,971,472,744],function(){return e(e.s=10305)}),_N_E=e.O()}]);