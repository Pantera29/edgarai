(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[672],{10305:function(e,r,i){Promise.resolve().then(i.bind(i,58686))},58686:function(e,r,i){"use strict";i.r(r),i.d(r,{default:function(){return ServiciosPage}});var t=i(57437),s=i(2265),a=i(23611),n=i(35831),o=i(66005),d=i(62031),c=i(61465),l=i(12899),u=i(71271),m=i(14150),p=i(45487),f=i(17472);function ServiciosPage(){let{toast:e}=(0,u.pm)(),[r,i]=(0,s.useState)([]),[x,h]=(0,s.useState)(!1),[v,g]=(0,s.useState)(!1),[j,b]=(0,s.useState)({nombre:"",descripcion:"",duracion_estimada:0,precio:0}),[N,y]=(0,s.useState)(null),[w,S]=(0,s.useState)(!1);async function cargarServicios(){let{data:r,error:t}=await l.O.from("servicios").select("*").order("nombre");if(t){e({variant:"destructive",title:"Error",description:"No se pudieron cargar los servicios"});return}i(r)}(0,s.useEffect)(()=>{cargarServicios()},[]);let formatPrice=e=>new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS"}).format(e),handleSubmit=async t=>{if(t.preventDefault(),!j.nombre.trim()){e({variant:"destructive",title:"Error de validaci\xf3n",description:"El nombre es obligatorio"});return}if(j.duracion_estimada<=0){e({variant:"destructive",title:"Error de validaci\xf3n",description:"La duraci\xf3n debe ser mayor a 0 minutos"});return}if(j.precio<0){e({variant:"destructive",title:"Error de validaci\xf3n",description:"El precio no puede ser negativo"});return}g(!0);try{let{data:t,error:s}=await l.O.from("servicios").insert([{nombre:j.nombre,descripcion:j.descripcion,duracion_estimada:j.duracion_estimada,precio:j.precio}]).select();if(s)throw s;t&&(e({title:"Servicio guardado",description:"El servicio se ha registrado correctamente"}),i([...r,t[0]]),h(!1),b({nombre:"",descripcion:"",duracion_estimada:0,precio:0}))}catch(r){e({variant:"destructive",title:"Error",description:"Hubo un problema al guardar el servicio"})}finally{g(!1)}},handleUpdate=async t=>{if(t.preventDefault(),!N.nombre.trim()){e({variant:"destructive",title:"Error de validaci\xf3n",description:"El nombre es obligatorio"});return}if(N.duracion_estimada<=0){e({variant:"destructive",title:"Error de validaci\xf3n",description:"La duraci\xf3n debe ser mayor a 0 minutos"});return}if(N.precio<0){e({variant:"destructive",title:"Error de validaci\xf3n",description:"El precio no puede ser negativo"});return}if(window.confirm("\xbfEst\xe1 seguro de guardar los cambios?")){g(!0);try{let{data:t,error:s}=await l.O.from("servicios").update({nombre:N.nombre,descripcion:N.descripcion,duracion_estimada:N.duracion_estimada,precio:N.precio}).eq("id",N.id).select();if(s)throw s;t&&(e({title:"Servicio actualizado",description:"Los cambios se han guardado correctamente"}),i(r.map(e=>e.id===N.id?t[0]:e)),S(!1),y(null))}catch(r){e({variant:"destructive",title:"Error",description:"Hubo un problema al actualizar el servicio"})}finally{g(!1)}}};return(0,t.jsxs)("div",{className:"container mx-auto py-10",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Servicios"}),(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)(n.I,{placeholder:"Buscar servicios...",className:"max-w-sm"}),(0,t.jsx)(a.z,{onClick:()=>h(!0),children:"A\xf1adir Nuevo Servicio"})]}),(0,t.jsxs)(o.iA,{children:[(0,t.jsx)(o.xD,{children:(0,t.jsxs)(o.SC,{children:[(0,t.jsx)(o.ss,{children:"Nombre"}),(0,t.jsx)(o.ss,{children:"Descripci\xf3n"}),(0,t.jsx)(o.ss,{children:"Duraci\xf3n (min)"}),(0,t.jsx)(o.ss,{children:"Precio"}),(0,t.jsx)(o.ss,{className:"text-right",children:"Acciones"})]})}),(0,t.jsx)(o.RM,{children:r.map(e=>(0,t.jsxs)(o.SC,{children:[(0,t.jsx)(o.pj,{className:"font-medium",children:e.nombre}),(0,t.jsx)(o.pj,{children:e.descripcion}),(0,t.jsxs)(o.pj,{children:[e.duracion_estimada," min"]}),(0,t.jsx)(o.pj,{children:formatPrice(e.precio)}),(0,t.jsx)(o.pj,{className:"text-right",children:(0,t.jsxs)(p.h_,{children:[(0,t.jsx)(p.$F,{asChild:!0,children:(0,t.jsxs)(a.z,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,t.jsx)("span",{className:"sr-only",children:"Abrir men\xfa"}),(0,t.jsx)(f.Z,{className:"h-4 w-4"})]})}),(0,t.jsxs)(p.AW,{align:"end",children:[(0,t.jsx)(p.Ju,{children:"Acciones"}),(0,t.jsx)(p.Xi,{onClick:()=>{y(e),S(!0)},children:"Editar servicio"})]})]})})]},e.id))})]}),(0,t.jsx)(d.Vq,{open:x,onOpenChange:h,children:(0,t.jsxs)(d.cZ,{children:[(0,t.jsxs)(d.fK,{children:[(0,t.jsx)(d.$N,{children:"A\xf1adir Nuevo Servicio"}),(0,t.jsx)(d.Be,{children:"Complete los datos del nuevo servicio. Los campos marcados con * son obligatorios."})]}),(0,t.jsxs)("form",{onSubmit:handleSubmit,children:[(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(c._,{htmlFor:"nombre",className:"text-right",children:"Nombre *"}),(0,t.jsx)(n.I,{id:"nombre",className:"col-span-3",value:j.nombre,onChange:e=>b({...j,nombre:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(c._,{htmlFor:"descripcion",className:"text-right",children:"Descripci\xf3n"}),(0,t.jsx)(n.I,{id:"descripcion",className:"col-span-3",value:j.descripcion,onChange:e=>b({...j,descripcion:e.target.value})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(c._,{htmlFor:"duracion",className:"text-right",children:"Duraci\xf3n (min) *"}),(0,t.jsx)(n.I,{id:"duracion",type:"number",min:"1",className:"col-span-3",value:j.duracion_estimada,onChange:e=>b({...j,duracion_estimada:Number(e.target.value)}),required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(c._,{htmlFor:"precio",className:"text-right",children:"Precio *"}),(0,t.jsx)(n.I,{id:"precio",type:"number",min:"0",step:"0.01",className:"col-span-3",value:j.precio,onChange:e=>b({...j,precio:Number(e.target.value)}),required:!0})]})]}),(0,t.jsx)(d.cN,{children:(0,t.jsx)(a.z,{type:"submit",disabled:v,children:v?"Guardando...":"Guardar Servicio"})})]})]})}),(0,t.jsx)(d.Vq,{open:w,onOpenChange:S,children:(0,t.jsxs)(d.cZ,{children:[(0,t.jsxs)(d.fK,{children:[(0,t.jsx)(d.$N,{children:"Editar Servicio"}),(0,t.jsx)(d.Be,{children:"Modifique los datos del servicio."})]}),(0,t.jsxs)("form",{onSubmit:handleUpdate,children:[(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(c._,{htmlFor:"edit-nombre",className:"text-right",children:"Nombre *"}),(0,t.jsx)(n.I,{id:"edit-nombre",className:"col-span-3",value:null==N?void 0:N.nombre,onChange:e=>y(r=>r?{...r,nombre:e.target.value}:r),required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(c._,{htmlFor:"edit-descripcion",className:"text-right",children:"Descripci\xf3n"}),(0,t.jsx)(n.I,{id:"edit-descripcion",className:"col-span-3",value:null==N?void 0:N.descripcion,onChange:e=>y(r=>r?{...r,descripcion:e.target.value}:r)})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(c._,{htmlFor:"edit-duracion",className:"text-right",children:"Duraci\xf3n (min) *"}),(0,t.jsx)(n.I,{id:"edit-duracion",type:"number",min:"1",className:"col-span-3",value:null==N?void 0:N.duracion_estimada,onChange:e=>y(r=>r?{...r,duracion_estimada:Number(e.target.value)}:r),required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(c._,{htmlFor:"edit-precio",className:"text-right",children:"Precio *"}),(0,t.jsx)(n.I,{id:"edit-precio",type:"number",min:"0",step:"0.01",className:"col-span-3",value:null==N?void 0:N.precio,onChange:e=>y(r=>r?{...r,precio:Number(e.target.value)}:r),required:!0})]})]}),(0,t.jsx)(d.cN,{children:(0,t.jsx)(a.z,{type:"submit",disabled:v,children:v?"Guardando...":"Guardar Cambios"})})]})]})}),(0,t.jsx)(m.x,{})]})}},61465:function(e,r,i){"use strict";i.d(r,{_:function(){return c}});var t=i(57437),s=i(2265),a=i(36743),n=i(96061),o=i(81628);let d=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=s.forwardRef((e,r)=>{let{className:i,...s}=e;return(0,t.jsx)(a.f,{ref:r,className:(0,o.cn)(d(),i),...s})});c.displayName=a.f.displayName},14150:function(e,r,i){"use strict";i.d(r,{x:function(){return Toaster}});var t=i(57437),s=i(2265);let a=0;function genId(){return(a=(a+1)%Number.MAX_SAFE_INTEGER).toString()}let n=new Map,addToRemoveQueue=e=>{if(n.has(e))return;let r=setTimeout(()=>{n.delete(e),dispatch({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,r)},reducer=(e,r)=>{switch(r.type){case"ADD_TOAST":return{...e,toasts:[r.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===r.toast.id?{...e,...r.toast}:e)};case"DISMISS_TOAST":{let{toastId:i}=r;return i?addToRemoveQueue(i):e.toasts.forEach(e=>{addToRemoveQueue(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===i||void 0===i?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===r.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==r.toastId)}}},o=[],d={toasts:[]};function dispatch(e){d=reducer(d,e),o.forEach(e=>{e(d)})}function toast(e){let{...r}=e,i=genId(),dismiss=()=>dispatch({type:"DISMISS_TOAST",toastId:i});return dispatch({type:"ADD_TOAST",toast:{...r,id:i,open:!0,onOpenChange:e=>{e||dismiss()}}}),{id:i,dismiss,update:e=>dispatch({type:"UPDATE_TOAST",toast:{...e,id:i}})}}function useToast(){let[e,r]=s.useState(d);return s.useEffect(()=>(o.push(r),()=>{let e=o.indexOf(r);e>-1&&o.splice(e,1)}),[e]),{...e,toast,dismiss:e=>dispatch({type:"DISMISS_TOAST",toastId:e})}}var c=i(18361),l=i(96061),u=i(82549),m=i(81628);let p=c.zt,f=s.forwardRef((e,r)=>{let{className:i,...s}=e;return(0,t.jsx)(c.l_,{ref:r,className:(0,m.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",i),...s})});f.displayName=c.l_.displayName;let x=(0,l.j)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),h=s.forwardRef((e,r)=>{let{className:i,variant:s,...a}=e;return(0,t.jsx)(c.fC,{ref:r,className:(0,m.cn)(x({variant:s}),i),...a})});h.displayName=c.fC.displayName;let v=s.forwardRef((e,r)=>{let{className:i,...s}=e;return(0,t.jsx)(c.aU,{ref:r,className:(0,m.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",i),...s})});v.displayName=c.aU.displayName;let g=s.forwardRef((e,r)=>{let{className:i,...s}=e;return(0,t.jsx)(c.x8,{ref:r,className:(0,m.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",i),"toast-close":"",...s,children:(0,t.jsx)(u.Z,{className:"h-4 w-4"})})});g.displayName=c.x8.displayName;let j=s.forwardRef((e,r)=>{let{className:i,...s}=e;return(0,t.jsx)(c.Dx,{ref:r,className:(0,m.cn)("text-sm font-semibold",i),...s})});j.displayName=c.Dx.displayName;let b=s.forwardRef((e,r)=>{let{className:i,...s}=e;return(0,t.jsx)(c.dk,{ref:r,className:(0,m.cn)("text-sm opacity-90",i),...s})});function Toaster(){let{toasts:e}=useToast();return(0,t.jsxs)(p,{children:[e.map(function(e){let{id:r,title:i,description:s,action:a,...n}=e;return(0,t.jsxs)(h,{...n,children:[(0,t.jsxs)("div",{className:"grid gap-1",children:[i&&(0,t.jsx)(j,{children:i}),s&&(0,t.jsx)(b,{children:s})]}),a,(0,t.jsx)(g,{})]},r)}),(0,t.jsx)(f,{})]})}b.displayName=c.dk.displayName},36743:function(e,r,i){"use strict";i.d(r,{f:function(){return o}});var t=i(2265),s=i(9381),a=i(57437),n=t.forwardRef((e,r)=>(0,a.jsx)(s.WV.label,{...e,ref:r,onMouseDown:r=>{let i=r.target;i.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));n.displayName="Label";var o=n},8281:function(e,r,i){"use strict";i.d(r,{T:function(){return n},f:function(){return o}});var t=i(2265),s=i(9381),a=i(57437),n=t.forwardRef((e,r)=>(0,a.jsx)(s.WV.span,{...e,ref:r,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));n.displayName="VisuallyHidden";var o=n}},function(e){e.O(0,[360,503,402,201,580,160,361,20,971,472,744],function(){return e(e.s=10305)}),_N_E=e.O()}]);