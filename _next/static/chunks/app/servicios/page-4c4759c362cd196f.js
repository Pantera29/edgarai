(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6672],{13383:function(e,i,r){Promise.resolve().then(r.bind(r,6350))},6350:function(e,i,r){"use strict";r.r(i),r.d(i,{default:function(){return x}});var s=r(57437),t=r(2265),n=r(62869),c=r(95186),a=r(73578),o=r(26110),l=r(26815),d=r(2141),u=r(77992),m=r(849),p=r(84190),h=r(56266);function x(){let{toast:e}=(0,u.pm)(),[i,r]=(0,t.useState)([]),[x,v]=(0,t.useState)(!1),[f,j]=(0,t.useState)(!1),[g,b]=(0,t.useState)({nombre:"",descripcion:"",duracion_estimada:0,precio:0}),[N,y]=(0,t.useState)(null),[C,w]=(0,t.useState)(!1);async function I(){let{data:i,error:s}=await d.O.from("servicios").select("*").order("nombre");if(s){e({variant:"destructive",title:"Error",description:"No se pudieron cargar los servicios"});return}r(i)}(0,t.useEffect)(()=>{I()},[]);let _=e=>new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS"}).format(e),E=async s=>{if(s.preventDefault(),!g.nombre.trim()){e({variant:"destructive",title:"Error de validaci\xf3n",description:"El nombre es obligatorio"});return}if(g.duracion_estimada<=0){e({variant:"destructive",title:"Error de validaci\xf3n",description:"La duraci\xf3n debe ser mayor a 0 minutos"});return}if(g.precio<0){e({variant:"destructive",title:"Error de validaci\xf3n",description:"El precio no puede ser negativo"});return}j(!0);try{let{data:s,error:t}=await d.O.from("servicios").insert([{nombre:g.nombre,descripcion:g.descripcion,duracion_estimada:g.duracion_estimada,precio:g.precio}]).select();if(t)throw t;s&&(e({title:"Servicio guardado",description:"El servicio se ha registrado correctamente"}),r([...i,s[0]]),v(!1),b({nombre:"",descripcion:"",duracion_estimada:0,precio:0}))}catch(i){e({variant:"destructive",title:"Error",description:"Hubo un problema al guardar el servicio"})}finally{j(!1)}},S=async s=>{if(s.preventDefault(),!N.nombre.trim()){e({variant:"destructive",title:"Error de validaci\xf3n",description:"El nombre es obligatorio"});return}if(N.duracion_estimada<=0){e({variant:"destructive",title:"Error de validaci\xf3n",description:"La duraci\xf3n debe ser mayor a 0 minutos"});return}if(N.precio<0){e({variant:"destructive",title:"Error de validaci\xf3n",description:"El precio no puede ser negativo"});return}if(window.confirm("\xbfEst\xe1 seguro de guardar los cambios?")){j(!0);try{let{data:s,error:t}=await d.O.from("servicios").update({nombre:N.nombre,descripcion:N.descripcion,duracion_estimada:N.duracion_estimada,precio:N.precio}).eq("id",N.id).select();if(t)throw t;s&&(e({title:"Servicio actualizado",description:"Los cambios se han guardado correctamente"}),r(i.map(e=>e.id===N.id?s[0]:e)),w(!1),y(null))}catch(i){e({variant:"destructive",title:"Error",description:"Hubo un problema al actualizar el servicio"})}finally{j(!1)}}};return(0,s.jsxs)("div",{className:"container mx-auto py-10",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Servicios"}),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)(c.I,{placeholder:"Buscar servicios...",className:"max-w-sm"}),(0,s.jsx)(n.z,{onClick:()=>v(!0),children:"A\xf1adir Nuevo Servicio"})]}),(0,s.jsxs)(a.iA,{children:[(0,s.jsx)(a.xD,{children:(0,s.jsxs)(a.SC,{children:[(0,s.jsx)(a.ss,{children:"Nombre"}),(0,s.jsx)(a.ss,{children:"Descripci\xf3n"}),(0,s.jsx)(a.ss,{children:"Duraci\xf3n (min)"}),(0,s.jsx)(a.ss,{children:"Precio"}),(0,s.jsx)(a.ss,{className:"text-right",children:"Acciones"})]})}),(0,s.jsx)(a.RM,{children:i.map(e=>(0,s.jsxs)(a.SC,{children:[(0,s.jsx)(a.pj,{className:"font-medium",children:e.nombre}),(0,s.jsx)(a.pj,{children:e.descripcion}),(0,s.jsxs)(a.pj,{children:[e.duracion_estimada," min"]}),(0,s.jsx)(a.pj,{children:_(e.precio)}),(0,s.jsx)(a.pj,{className:"text-right",children:(0,s.jsxs)(p.h_,{children:[(0,s.jsx)(p.$F,{asChild:!0,children:(0,s.jsxs)(n.z,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,s.jsx)("span",{className:"sr-only",children:"Abrir men\xfa"}),(0,s.jsx)(h.Z,{className:"h-4 w-4"})]})}),(0,s.jsxs)(p.AW,{align:"end",children:[(0,s.jsx)(p.Ju,{children:"Acciones"}),(0,s.jsx)(p.Xi,{onClick:()=>{y(e),w(!0)},children:"Editar servicio"})]})]})})]},e.id))})]}),(0,s.jsx)(o.Vq,{open:x,onOpenChange:v,children:(0,s.jsxs)(o.cZ,{children:[(0,s.jsxs)(o.fK,{children:[(0,s.jsx)(o.$N,{children:"A\xf1adir Nuevo Servicio"}),(0,s.jsx)(o.Be,{children:"Complete los datos del nuevo servicio. Los campos marcados con * son obligatorios."})]}),(0,s.jsxs)("form",{onSubmit:E,children:[(0,s.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(l._,{htmlFor:"nombre",className:"text-right",children:"Nombre *"}),(0,s.jsx)(c.I,{id:"nombre",className:"col-span-3",value:g.nombre,onChange:e=>b({...g,nombre:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(l._,{htmlFor:"descripcion",className:"text-right",children:"Descripci\xf3n"}),(0,s.jsx)(c.I,{id:"descripcion",className:"col-span-3",value:g.descripcion,onChange:e=>b({...g,descripcion:e.target.value})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(l._,{htmlFor:"duracion",className:"text-right",children:"Duraci\xf3n (min) *"}),(0,s.jsx)(c.I,{id:"duracion",type:"number",min:"1",className:"col-span-3",value:g.duracion_estimada,onChange:e=>b({...g,duracion_estimada:Number(e.target.value)}),required:!0})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(l._,{htmlFor:"precio",className:"text-right",children:"Precio *"}),(0,s.jsx)(c.I,{id:"precio",type:"number",min:"0",step:"0.01",className:"col-span-3",value:g.precio,onChange:e=>b({...g,precio:Number(e.target.value)}),required:!0})]})]}),(0,s.jsx)(o.cN,{children:(0,s.jsx)(n.z,{type:"submit",disabled:f,children:f?"Guardando...":"Guardar Servicio"})})]})]})}),(0,s.jsx)(o.Vq,{open:C,onOpenChange:w,children:(0,s.jsxs)(o.cZ,{children:[(0,s.jsxs)(o.fK,{children:[(0,s.jsx)(o.$N,{children:"Editar Servicio"}),(0,s.jsx)(o.Be,{children:"Modifique los datos del servicio."})]}),(0,s.jsxs)("form",{onSubmit:S,children:[(0,s.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(l._,{htmlFor:"edit-nombre",className:"text-right",children:"Nombre *"}),(0,s.jsx)(c.I,{id:"edit-nombre",className:"col-span-3",value:null==N?void 0:N.nombre,onChange:e=>y(i=>i?{...i,nombre:e.target.value}:i),required:!0})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(l._,{htmlFor:"edit-descripcion",className:"text-right",children:"Descripci\xf3n"}),(0,s.jsx)(c.I,{id:"edit-descripcion",className:"col-span-3",value:null==N?void 0:N.descripcion,onChange:e=>y(i=>i?{...i,descripcion:e.target.value}:i)})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(l._,{htmlFor:"edit-duracion",className:"text-right",children:"Duraci\xf3n (min) *"}),(0,s.jsx)(c.I,{id:"edit-duracion",type:"number",min:"1",className:"col-span-3",value:null==N?void 0:N.duracion_estimada,onChange:e=>y(i=>i?{...i,duracion_estimada:Number(e.target.value)}:i),required:!0})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(l._,{htmlFor:"edit-precio",className:"text-right",children:"Precio *"}),(0,s.jsx)(c.I,{id:"edit-precio",type:"number",min:"0",step:"0.01",className:"col-span-3",value:null==N?void 0:N.precio,onChange:e=>y(i=>i?{...i,precio:Number(e.target.value)}:i),required:!0})]})]}),(0,s.jsx)(o.cN,{children:(0,s.jsx)(n.z,{type:"submit",disabled:f,children:f?"Guardando...":"Guardar Cambios"})})]})]})}),(0,s.jsx)(m.x,{})]})}},2141:function(e,i,r){"use strict";r.d(i,{O:function(){return s}});let s=(0,r(93777).eI)("https://kronhxyuinsrsoezbtni.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imtyb25oeHl1aW5zcnNvZXpidG5pIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzU5NTkxMzQsImV4cCI6MjA1MTUzNTEzNH0.AFL2xKo1lasYJPwURdCKkEp_BWudW-8vDmEY6w2MY1I")},30401:function(e,i,r){"use strict";r.d(i,{Z:function(){return s}});let s=(0,r(39763).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},56266:function(e,i,r){"use strict";r.d(i,{Z:function(){return s}});let s=(0,r(39763).Z)("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},67822:function(e,i,r){"use strict";r.d(i,{B:function(){return o}});var s=r(2265),t=r(73966),n=r(98575),c=r(37053),a=r(57437);function o(e){let i=e+"CollectionProvider",[r,o]=(0,t.b)(i),[l,d]=r(i,{collectionRef:{current:null},itemMap:new Map}),u=e=>{let{scope:i,children:r}=e,t=s.useRef(null),n=s.useRef(new Map).current;return(0,a.jsx)(l,{scope:i,itemMap:n,collectionRef:t,children:r})};u.displayName=i;let m=e+"CollectionSlot",p=s.forwardRef((e,i)=>{let{scope:r,children:s}=e,t=d(m,r),o=(0,n.e)(i,t.collectionRef);return(0,a.jsx)(c.g7,{ref:o,children:s})});p.displayName=m;let h=e+"CollectionItemSlot",x="data-radix-collection-item",v=s.forwardRef((e,i)=>{let{scope:r,children:t,...o}=e,l=s.useRef(null),u=(0,n.e)(i,l),m=d(h,r);return s.useEffect(()=>(m.itemMap.set(l,{ref:l,...o}),()=>void m.itemMap.delete(l))),(0,a.jsx)(c.g7,{[x]:"",ref:u,children:t})});return v.displayName=h,[{Provider:u,Slot:p,ItemSlot:v},function(i){let r=d(e+"CollectionConsumer",i);return s.useCallback(()=>{let e=r.collectionRef.current;if(!e)return[];let i=Array.from(e.querySelectorAll("[".concat(x,"]")));return Array.from(r.itemMap.values()).sort((e,r)=>i.indexOf(e.ref.current)-i.indexOf(r.ref.current))},[r.collectionRef,r.itemMap])},o]}},29114:function(e,i,r){"use strict";r.d(i,{gm:function(){return n}});var s=r(2265);r(57437);var t=s.createContext(void 0);function n(e){let i=s.useContext(t);return e||i||"ltr"}},6394:function(e,i,r){"use strict";r.d(i,{f:function(){return a}});var s=r(2265),t=r(66840),n=r(57437),c=s.forwardRef((e,i)=>(0,n.jsx)(t.WV.label,{...e,ref:i,onMouseDown:i=>{var r;i.target.closest("button, input, select, textarea")||(null===(r=e.onMouseDown)||void 0===r||r.call(e,i),!i.defaultPrevented&&i.detail>1&&i.preventDefault())}}));c.displayName="Label";var a=c},95098:function(e,i,r){"use strict";r.d(i,{T:function(){return c},f:function(){return a}});var s=r(2265),t=r(66840),n=r(57437),c=s.forwardRef((e,i)=>(0,n.jsx)(t.WV.span,{...e,ref:i,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));c.displayName="VisuallyHidden";var a=c}},function(e){e.O(0,[9903,8325,4384,6008,8001,4116,5184,1915,277,2971,2117,1744],function(){return e(e.s=13383)}),_N_E=e.O()}]);