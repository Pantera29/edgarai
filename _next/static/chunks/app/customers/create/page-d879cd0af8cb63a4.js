(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[499],{26540:function(e,t,r){Promise.resolve().then(r.bind(r,66306))},66306:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var n=r(57437),s=r(2265),a=r(95452),i=r(99027);let o=(0,a.createClientComponentClient)();function l(){let[e,t]=(0,s.useState)(null),[r,a]=(0,s.useState)(null),[l,u]=(0,s.useState)({});return(0,s.useEffect)(()=>{let e=new URLSearchParams(window.location.search),t=e.get("name"),r=e.get("email"),n=e.get("phone"),s=e.get("dealership_id");if(!t||!r||!n||!s){a("Missing required parameters");return}(async()=>{try{let{data:e,error:a}=await o.from("client").select("*").match({email:r,phone_number:n});if(a||e.length>0)return i.NextResponse.json({message:"Client already exists"},{status:200});let{data:l,error:u}=await o.from("client").insert([{names:t,email:r,phone_number:n,dealership_id:s}]);if(u)return console.error("Error inserting data:",u.message),i.NextResponse.json({message:"Failed to create customer",error:u},{status:500});return i.NextResponse.json({status:200})}catch(e){console.error("Error during fetch:",e),a("Error during fetch")}})()},[l]),(0,n.jsxs)("div",{children:[e&&(0,n.jsx)("p",{children:e}),r&&(0,n.jsx)("p",{style:{color:"red"},children:r})]})}}},function(e){e.O(0,[3777,5452,9027,2971,2117,1744],function(){return e(e.s=26540)}),_N_E=e.O()}]);