(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7497],{29834:function(e,t,r){Promise.resolve().then(r.bind(r,52587))},52587:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return S}});var a=r(57437),n=r(2265),s=r(62869),o=r(95186),i=r(73578),l=r(53647),c=r(2141),d=r(77992),u=r(849),h=r(70236),m=r(89048),f=r(20653),p=r(25721),x=r(94508),g=r(1098),v=r(57054);function j(e){let{className:t}=e,[r,o]=n.useState({from:new Date(2023,0,20),to:(0,p.Z)(new Date(2023,0,20),20)});return(0,a.jsx)("div",{className:(0,x.cn)("grid gap-2",t),children:(0,a.jsxs)(v.J2,{children:[(0,a.jsx)(v.xo,{asChild:!0,children:(0,a.jsxs)(s.z,{id:"date",variant:"outline",className:(0,x.cn)("w-[260px] justify-start text-left font-normal",!r&&"text-muted-foreground"),children:[(0,a.jsx)(f.Que,{className:"mr-2 h-4 w-4"}),(null==r?void 0:r.from)?r.to?(0,a.jsxs)(a.Fragment,{children:[(0,h.Z)(r.from,"LLL dd, y")," -"," ",(0,h.Z)(r.to,"LLL dd, y")]}):(0,h.Z)(r.from,"LLL dd, y"):(0,a.jsx)("span",{children:"Pick a date"})]})}),(0,a.jsx)(v.yk,{className:"w-auto p-0",align:"end",children:(0,a.jsx)(g.f,{initialFocus:!0,mode:"range",defaultMonth:null==r?void 0:r.from,selected:r,onSelect:o,numberOfMonths:2})})]})})}var b=r(35974),y=r(27648),w=r(26110),_=r(26815),N=r(76818),C=r(99376);let R=e=>{switch(e){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},P=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"scheduled":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};function k(e){let{servicio:t,open:r,onOpenChange:o}=e,[i,l]=(0,n.useState)(!1),[u,f]=(0,n.useState)(""),{toast:p}=(0,d.pm)(),x=(0,C.useRouter)(),g=async e=>{if(t){l(!0);try{let{error:r}=await c.O.from("recommended_services").update({status:e}).eq("id",t.id);if(r)throw r;p({title:"Estado actualizado",description:"El estado del servicio ha sido actualizado exitosamente"}),o(!1)}catch(e){console.error("Error al actualizar:",e),p({variant:"destructive",title:"Error",description:"No se pudo actualizar el estado del servicio"})}finally{l(!1)}}},v=async()=>{if(t)try{x.push("/citas?action=create&vehicle_id=".concat(t.vehicle_id,"&recommended_service_id=").concat(t.id)),o(!1)}catch(e){console.error("Error:",e),p({variant:"destructive",title:"Error",description:"No se pudo iniciar el proceso de agendamiento"})}};return t?(0,a.jsx)(w.Vq,{open:r,onOpenChange:o,children:(0,a.jsxs)(w.cZ,{className:"max-w-3xl",children:[(0,a.jsxs)(w.fK,{children:[(0,a.jsx)(w.$N,{children:"Detalles del Servicio Recomendado"}),(0,a.jsxs)(w.Be,{children:["Detectado el ",(0,h.Z)(new Date(t.created_at),"dd/MM/yyyy",{locale:m.Z})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"Informaci\xf3n del Veh\xedculo"}),(0,a.jsxs)("p",{children:["Cliente: ",t.vehiculos.clientes.nombre]}),(0,a.jsxs)("p",{children:["Veh\xedculo: ",t.vehiculos.marca," ",t.vehiculos.modelo]}),(0,a.jsxs)("p",{children:["Placa: ",t.vehiculos.placa]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"Informaci\xf3n del Servicio"}),(0,a.jsxs)("p",{children:["Servicio: ",t.service_name]}),(0,a.jsxs)("p",{children:["Urgencia:",(0,a.jsx)(b.C,{className:"ml-2 ".concat(R(t.urgency_level)),children:"high"===t.urgency_level?"Alta":"medium"===t.urgency_level?"Media":"Baja"})]}),(0,a.jsxs)("p",{children:["Estado:",(0,a.jsx)(b.C,{className:"ml-2 ".concat(P(t.status)),children:"pending"===t.status?"Pendiente":"scheduled"===t.status?"Agendado":"completed"===t.status?"Completado":"Rechazado"})]})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"Descripci\xf3n"}),(0,a.jsx)("p",{className:"text-gray-600",children:t.service_description||"Sin descripci\xf3n"})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"Notas T\xe9cnicas"}),(0,a.jsx)("p",{className:"text-gray-600",children:t.technical_notes||"Sin notas t\xe9cnicas"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"Tiempo Estimado"}),(0,a.jsx)("p",{children:t.estimated_time?"".concat(t.estimated_time," minutos"):"No especificado"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"Costo Estimado"}),(0,a.jsx)("p",{children:t.estimated_cost?"$".concat(t.estimated_cost.toLocaleString()):"No especificado"})]})]}),(0,a.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(_._,{children:"Comentario"}),(0,a.jsx)(N.g,{value:u,onChange:e=>f(e.target.value),placeholder:"Agregar un comentario sobre el cambio de estado..."})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(s.z,{variant:"outline",onClick:()=>o(!1),disabled:i,children:"Cancelar"}),(null==t?void 0:t.status)==="pending"&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.z,{variant:"default",onClick:v,disabled:i,children:"Agendar Cita"}),(0,a.jsx)(s.z,{variant:"destructive",onClick:()=>g("rejected"),disabled:i,children:"Rechazar"})]})]})]})]})}):null}function S(){let{toast:e}=(0,d.pm)(),[t,r]=(0,n.useState)(!0),[f,p]=(0,n.useState)([]),[x,g]=(0,n.useState)({urgencia:"all",estado:"all",busqueda:"",fechaInicio:null,fechaFin:null}),[v,w]=(0,n.useState)(null),[_,N]=(0,n.useState)(!1),C=async()=>{try{console.log("Cargando servicios...");let{data:e,error:t}=await c.O.from("recommended_services").select("\n          *,\n          vehiculos:vehicle_id (\n            marca,\n            modelo,\n            placa,\n            clientes:id_cliente_uuid (\n              nombre\n            )\n          )\n        ").order("created_at",{ascending:!1});if(console.log("Respuesta:",{data:e,error:t}),t)throw t;p(e||[])}catch(t){console.error("Error al cargar servicios:",t),e({variant:"destructive",title:"Error",description:"No se pudieron cargar los servicios recomendados"})}finally{r(!1)}};(0,n.useEffect)(()=>{C()},[]);let S=f.filter(e=>{if(console.log("Filtrando servicio:",e),console.log("Filtros actuales:",x),"all"!==x.urgencia&&e.urgency_level!==x.urgencia)return console.log("Filtrado por urgencia"),!1;if("all"!==x.estado&&e.status!==x.estado)return console.log("Filtrado por estado"),!1;if(x.busqueda){let t=x.busqueda.toLowerCase(),r=e.vehiculos.clientes.nombre.toLowerCase().includes(t),a="".concat(e.vehiculos.marca," ").concat(e.vehiculos.modelo," ").concat(e.vehiculos.placa).toLowerCase().includes(t);if(!r&&!a)return!1}if(x.fechaInicio&&x.fechaFin){let t=new Date(e.created_at),r=new Date(x.fechaInicio),a=new Date(x.fechaFin);if(t<r||t>a)return!1}return!0});console.log("Servicios filtrados:",S);let[D,z]=(0,n.useState)({columna:"created_at",direccion:"desc"}),E=[...S].sort((e,t)=>{let r=0;switch(D.columna){case"created_at":r=new Date(e.created_at).getTime()-new Date(t.created_at).getTime();break;case"cliente":r=e.vehiculos.clientes.nombre.localeCompare(t.vehiculos.clientes.nombre);break;case"urgency_level":let a={high:3,medium:2,low:1};r=a[e.urgency_level]-a[t.urgency_level];break;case"estimated_cost":r=(e.estimated_cost||0)-(t.estimated_cost||0);break;default:r=0}return"asc"===D.direccion?r:-r}),F=e=>{z(t=>({columna:e,direccion:t.columna===e&&"asc"===t.direccion?"desc":"asc"}))};return(0,a.jsxs)("div",{className:"container mx-auto py-10",children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Servicios Recomendados"})}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[(0,a.jsx)(j,{}),(0,a.jsxs)(l.Ph,{value:x.urgencia,onValueChange:e=>g({...x,urgencia:e}),children:[(0,a.jsx)(l.i4,{children:(0,a.jsx)(l.ki,{placeholder:"Filtrar por urgencia"})}),(0,a.jsxs)(l.Bw,{children:[(0,a.jsx)(l.Ql,{value:"all",children:"Todas"}),(0,a.jsx)(l.Ql,{value:"high",children:"Alta"}),(0,a.jsx)(l.Ql,{value:"medium",children:"Media"}),(0,a.jsx)(l.Ql,{value:"low",children:"Baja"})]})]}),(0,a.jsxs)(l.Ph,{value:x.estado,onValueChange:e=>g({...x,estado:e}),children:[(0,a.jsx)(l.i4,{children:(0,a.jsx)(l.ki,{placeholder:"Filtrar por estado"})}),(0,a.jsxs)(l.Bw,{children:[(0,a.jsx)(l.Ql,{value:"all",children:"Todos"}),(0,a.jsx)(l.Ql,{value:"pending",children:"Pendiente"}),(0,a.jsx)(l.Ql,{value:"scheduled",children:"Agendado"}),(0,a.jsx)(l.Ql,{value:"completed",children:"Completado"}),(0,a.jsx)(l.Ql,{value:"rejected",children:"Rechazado"})]})]}),(0,a.jsx)(o.I,{placeholder:"Buscar por cliente o veh\xedculo...",value:x.busqueda,onChange:e=>g({...x,busqueda:e.target.value})})]}),(0,a.jsx)("div",{className:"border rounded-lg",children:(0,a.jsxs)(i.iA,{children:[(0,a.jsx)(i.xD,{children:(0,a.jsxs)(i.SC,{children:[(0,a.jsxs)(i.ss,{onClick:()=>F("created_at"),className:"cursor-pointer",children:["Fecha ","created_at"===D.columna&&("asc"===D.direccion?"↑":"↓")]}),(0,a.jsxs)(i.ss,{onClick:()=>F("cliente"),className:"cursor-pointer",children:["Cliente ","cliente"===D.columna&&("asc"===D.direccion?"↑":"↓")]}),(0,a.jsx)(i.ss,{children:"Veh\xedculo"}),(0,a.jsx)(i.ss,{children:"Servicio"}),(0,a.jsx)(i.ss,{children:"Urgencia"}),(0,a.jsx)(i.ss,{children:"Costo Est."}),(0,a.jsx)(i.ss,{children:"Estado"}),(0,a.jsx)(i.ss,{className:"text-right",children:"Acciones"})]})}),(0,a.jsx)(i.RM,{children:t?(0,a.jsx)(i.SC,{children:(0,a.jsx)(i.pj,{colSpan:8,className:"text-center py-4",children:"Cargando..."})}):0===E.length?(0,a.jsx)(i.SC,{children:(0,a.jsx)(i.pj,{colSpan:8,className:"text-center py-4",children:"No hay servicios recomendados"})}):E.map(e=>{var t;return(0,a.jsxs)(i.SC,{children:[(0,a.jsx)(i.pj,{children:(0,h.Z)(new Date(e.created_at),"dd/MM/yyyy",{locale:m.Z})}),(0,a.jsx)(i.pj,{children:e.vehiculos.clientes.nombre}),(0,a.jsx)(i.pj,{children:(0,a.jsxs)(y.default,{href:"/vehiculos?id=".concat(e.vehicle_id),className:"hover:underline",children:[e.vehiculos.marca," ",e.vehiculos.modelo,(0,a.jsx)("br",{}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:e.vehiculos.placa})]})}),(0,a.jsx)(i.pj,{children:e.service_name}),(0,a.jsx)(i.pj,{children:(0,a.jsx)(b.C,{className:R(e.urgency_level),children:"high"===e.urgency_level?"Alta":"medium"===e.urgency_level?"Media":"Baja"})}),(0,a.jsxs)(i.pj,{children:["$",(null===(t=e.estimated_cost)||void 0===t?void 0:t.toLocaleString())||"-"]}),(0,a.jsx)(i.pj,{children:(0,a.jsx)(b.C,{className:P(e.status),children:"pending"===e.status?"Pendiente":"scheduled"===e.status?"Agendado":"completed"===e.status?"Completado":"Rechazado"})}),(0,a.jsx)(i.pj,{className:"text-right",children:(0,a.jsx)(s.z,{variant:"outline",size:"sm",onClick:()=>{w(e),N(!0)},children:"Ver Detalles"})})]},e.id)})})]})}),(0,a.jsx)(k,{servicio:v,open:_,onOpenChange:N}),(0,a.jsx)(u.x,{})]})}},35974:function(e,t,r){"use strict";r.d(t,{C:function(){return i}});var a=r(57437);r(2265);var n=r(90535),s=r(94508);let o=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground",outline:"text-foreground",success:"border-transparent bg-green-100 text-green-800",warning:"border-transparent bg-yellow-100 text-yellow-800",info:"border-transparent bg-blue-100 text-blue-800"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:r,...n}=e;return(0,a.jsx)("div",{className:(0,s.cn)(o({variant:r}),t),...n})}},1098:function(e,t,r){"use strict";r.d(t,{f:function(){return c}});var a=r(57437);r(2265);var n=r(92451),s=r(10407),o=r(65357),i=r(94508),l=r(62869);function c(e){let{className:t,classNames:r,showOutsideDays:c=!0,...d}=e;return(0,a.jsx)(o._W,{showOutsideDays:c,className:(0,i.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,i.cn)((0,l.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:(0,i.cn)("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md","range"===d.mode?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:(0,i.cn)((0,l.d)({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...r},components:{IconLeft:e=>{let{className:t,...r}=e;return(0,a.jsx)(n.Z,{className:(0,i.cn)("h-4 w-4",t),...r})},IconRight:e=>{let{className:t,...r}=e;return(0,a.jsx)(s.Z,{className:(0,i.cn)("h-4 w-4",t),...r})}},...d})}c.displayName="Calendar"},57054:function(e,t,r){"use strict";r.d(t,{J2:function(){return i},xo:function(){return l},yk:function(){return c}});var a=r(57437),n=r(2265),s=r(27312),o=r(94508);let i=s.fC,l=s.xz;s.ee;let c=n.forwardRef((e,t)=>{let{className:r,align:n="center",sideOffset:i=4,...l}=e;return(0,a.jsx)(s.h_,{children:(0,a.jsx)(s.VY,{ref:t,align:n,sideOffset:i,className:(0,o.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...l})})});c.displayName=s.VY.displayName},53647:function(e,t,r){"use strict";r.d(t,{Bw:function(){return m},DI:function(){return d},Ph:function(){return c},Ql:function(){return p},i4:function(){return h},ki:function(){return u},n5:function(){return f}});var a=r(57437),n=r(2265),s=r(56873),o=r(40875),i=r(30401),l=r(94508);let c=s.fC,d=s.ZA,u=s.B4,h=n.forwardRef((e,t)=>{let{className:r,children:n,...i}=e;return(0,a.jsxs)(s.xz,{ref:t,className:(0,l.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),...i,children:[n,(0,a.jsx)(s.JO,{asChild:!0,children:(0,a.jsx)(o.Z,{className:"h-4 w-4 opacity-50"})})]})});h.displayName=s.xz.displayName;let m=n.forwardRef((e,t)=>{let{className:r,children:n,position:o="popper",...i}=e;return(0,a.jsx)(s.h_,{children:(0,a.jsx)(s.VY,{ref:t,className:(0,l.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===o&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:o,...i,children:(0,a.jsx)(s.l_,{className:(0,l.cn)("p-1","popper"===o&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n})})})});m.displayName=s.VY.displayName;let f=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.__,{ref:t,className:(0,l.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...n})});f.displayName=s.__.displayName;let p=n.forwardRef((e,t)=>{let{className:r,children:n,...o}=e;return(0,a.jsxs)(s.ck,{ref:t,className:(0,l.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...o,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(s.wU,{children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(s.eT,{children:n})]})});p.displayName=s.ck.displayName,n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.Z0,{ref:t,className:(0,l.cn)("-mx-1 my-1 h-px bg-muted",r),...n})}).displayName=s.Z0.displayName},76818:function(e,t,r){"use strict";r.d(t,{g:function(){return o}});var a=r(57437),n=r(2265),s=r(94508);let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("textarea",{className:(0,s.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...n})});o.displayName="Textarea"},99376:function(e,t,r){"use strict";var a=r(35475);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},27312:function(e,t,r){"use strict";r.d(t,{VY:function(){return U},ee:function(){return B},fC:function(){return Q},h_:function(){return Y},xz:function(){return q}});var a=r(2265),n=r(6741),s=r(98575),o=r(73966),i=r(15278),l=r(86097),c=r(99103),d=r(99255),u=r(26008),h=r(83832),m=r(71599),f=r(66840),p=r(37053),x=r(80886),g=r(5478),v=r(87922),j=r(57437),b="Popover",[y,w]=(0,o.b)(b,[u.D7]),_=(0,u.D7)(),[N,C]=y(b),R=e=>{let{__scopePopover:t,children:r,open:n,defaultOpen:s,onOpenChange:o,modal:i=!1}=e,l=_(t),c=a.useRef(null),[h,m]=a.useState(!1),[f=!1,p]=(0,x.T)({prop:n,defaultProp:s,onChange:o});return(0,j.jsx)(u.fC,{...l,children:(0,j.jsx)(N,{scope:t,contentId:(0,d.M)(),triggerRef:c,open:f,onOpenChange:p,onOpenToggle:a.useCallback(()=>p(e=>!e),[p]),hasCustomAnchor:h,onCustomAnchorAdd:a.useCallback(()=>m(!0),[]),onCustomAnchorRemove:a.useCallback(()=>m(!1),[]),modal:i,children:r})})};R.displayName=b;var P="PopoverAnchor",k=a.forwardRef((e,t)=>{let{__scopePopover:r,...n}=e,s=C(P,r),o=_(r),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=s;return a.useEffect(()=>(i(),()=>l()),[i,l]),(0,j.jsx)(u.ee,{...o,...n,ref:t})});k.displayName=P;var S="PopoverTrigger",D=a.forwardRef((e,t)=>{let{__scopePopover:r,...a}=e,o=C(S,r),i=_(r),l=(0,s.e)(t,o.triggerRef),c=(0,j.jsx)(f.WV.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":T(o.open),...a,ref:l,onClick:(0,n.M)(e.onClick,o.onOpenToggle)});return o.hasCustomAnchor?c:(0,j.jsx)(u.ee,{asChild:!0,...i,children:c})});D.displayName=S;var z="PopoverPortal",[E,F]=y(z,{forceMount:void 0}),A=e=>{let{__scopePopover:t,forceMount:r,children:a,container:n}=e,s=C(z,t);return(0,j.jsx)(E,{scope:t,forceMount:r,children:(0,j.jsx)(m.z,{present:r||s.open,children:(0,j.jsx)(h.h,{asChild:!0,container:n,children:a})})})};A.displayName=z;var O="PopoverContent",M=a.forwardRef((e,t)=>{let r=F(O,e.__scopePopover),{forceMount:a=r.forceMount,...n}=e,s=C(O,e.__scopePopover);return(0,j.jsx)(m.z,{present:a||s.open,children:s.modal?(0,j.jsx)(Z,{...n,ref:t}):(0,j.jsx)(V,{...n,ref:t})})});M.displayName=O;var Z=a.forwardRef((e,t)=>{let r=C(O,e.__scopePopover),o=a.useRef(null),i=(0,s.e)(t,o),l=a.useRef(!1);return a.useEffect(()=>{let e=o.current;if(e)return(0,g.Ry)(e)},[]),(0,j.jsx)(v.Z,{as:p.g7,allowPinchZoom:!0,children:(0,j.jsx)(L,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,n.M)(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),l.current||null===(t=r.triggerRef.current)||void 0===t||t.focus()}),onPointerDownOutside:(0,n.M)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey,a=2===t.button||r;l.current=a},{checkForDefaultPrevented:!1}),onFocusOutside:(0,n.M)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),V=a.forwardRef((e,t)=>{let r=C(O,e.__scopePopover),n=a.useRef(!1),s=a.useRef(!1);return(0,j.jsx)(L,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var a,o;null===(a=e.onCloseAutoFocus)||void 0===a||a.call(e,t),t.defaultPrevented||(n.current||null===(o=r.triggerRef.current)||void 0===o||o.focus(),t.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:t=>{var a,o;null===(a=e.onInteractOutside)||void 0===a||a.call(e,t),t.defaultPrevented||(n.current=!0,"pointerdown"!==t.detail.originalEvent.type||(s.current=!0));let i=t.target;(null===(o=r.triggerRef.current)||void 0===o?void 0:o.contains(i))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&s.current&&t.preventDefault()}})}),L=a.forwardRef((e,t)=>{let{__scopePopover:r,trapFocus:a,onOpenAutoFocus:n,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:m,onInteractOutside:f,...p}=e,x=C(O,r),g=_(r);return(0,l.EW)(),(0,j.jsx)(c.M,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:n,onUnmountAutoFocus:s,children:(0,j.jsx)(i.XB,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:f,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:m,onDismiss:()=>x.onOpenChange(!1),children:(0,j.jsx)(u.VY,{"data-state":T(x.open),role:"dialog",id:x.contentId,...g,...p,ref:t,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),I="PopoverClose";function T(e){return e?"open":"closed"}a.forwardRef((e,t)=>{let{__scopePopover:r,...a}=e,s=C(I,r);return(0,j.jsx)(f.WV.button,{type:"button",...a,ref:t,onClick:(0,n.M)(e.onClick,()=>s.onOpenChange(!1))})}).displayName=I,a.forwardRef((e,t)=>{let{__scopePopover:r,...a}=e,n=_(r);return(0,j.jsx)(u.Eh,{...n,...a,ref:t})}).displayName="PopoverArrow";var Q=R,B=k,q=D,Y=A,U=M}},function(e){e.O(0,[8310,6137,3777,4384,6008,3026,6320,7648,51,8385,479,4139,2971,2117,1744],function(){return e(e.s=29834)}),_N_E=e.O()}]);